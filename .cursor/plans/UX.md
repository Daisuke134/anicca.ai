わかった。
ここからは「UX.md」にそのまま貼れる用の **完全なユーザー体験ドキュメント**を書くね。
データベースや実装の細かい話はいったん捨てて、「ユーザーがどう感じ、何が起きるか」だけに集中する。

---

# Anicca v0.3 UX.md

Persuasion Agent / 行動・人格変容エージェント

---

## 1. ビジョン

Anicca は「行動と人格を導く、音声の導師」。

・ユーザーが怠惰で、自分で決められない時でも
・Anicca が主体的に、その人の苦しみと理想を理解し
・最適なタイミングとことばで、強く優しく引っ張っていく

最終ゴールは

「誠実で、マインドフルで、自信があり、落ち着いていて、
依存から自由で、筋トレや学習を続けられる人」

に少しずつ近づけること。

---

## 2. コア原則

1. Anicca は「アシスタント」ではなく「導師」
   ・提案ではなく「指し示す」
   ・質問ではなく「方向を与える」
   ・選択肢の羅列ではなく、「これをやろう」と導く

2. ユーザーの入力は最小限
   ・オンボーディングで理想と Struggle を選ぶ
   ・データ利用を許可する
   それ以外は
   「日々の行動」と「時々の相談」だけで Anicca が学習していく

3. 過去の自分と智慧を使う
   ・過去の発言・後悔・成功体験を覚えていてくれる
   ・仏教・CBT・行動科学の智慧を、自分専用に翻訳して話してくれる

4. 負荷をかけない
   ・何か決めさせるのではなく、「押すだけ」で今の気持ちを Anicca に渡せる
   ・通知も、1 日に数件の「本当に必要な導き」に絞る

---

## 3. アプリ構造（タブ）

下タブバーは 3 つ。

1. Talk
   日々の相談・導き・音声セッションのメイン画面

2. Habits
   既存の「時間指定型の習慣・アラーム」の管理画面
   （v0.3 ではクラシックモード的な位置づけ）

3. Behavior
   自分の「今日・パターン・未来」を一枚で見るダッシュボード

---

## 4. オンボーディング体験

### 4.1 理想の姿の選択

画面文言例：

「どんな自分になりたい？」

・誠実でいたい
・マインドフルでいたい
・自分に自信を持ちたい
・落ち着いていたい
・筋肉質で健康でいたい
・人を傷つけないで生きたい

などのチップから、いくつでも選択。

### 4.2 Struggles（苦しみ）の選択

画面文言例：

「今、一番苦しいことは？」

・夜更かししてしまう
・スマホ / SNS / YouTube から抜けられない
・三日坊主で終わる
・人に執着してしまう
・自分を責め続けてしまう（自己嫌悪）
・怒りっぽい / 嫉妬しやすい
・頭が整理できず、混乱しやすい
・不安が強い

などを複数選択。
ここで選ばれたものが、後の「3つのFeelingボタン」の候補になる。

### 4.3 許可・アカウント

・Apple でサインイン
・Screen Time / HealthKit / Motion / 位置情報などの許可を、最小限の説明と共に案内
・「あなたの行動と対話を使って、Anicca があなたを理解していきます」と伝える

---

## 5. 毎日のループ（ざっくり）

1. 朝
   ・起床時刻・スマホの使い方を静かに観察
   ・必要があれば「朝一の導き」通知

2. 日中
   ・SNSや依存行動が一定時間を超えたときに nudge
   ・仕事/勉強に集中している時は邪魔しない

3. 夜
   ・夜更かしや自己嫌悪が強まりやすい時間帯に nudge
   ・ユーザーがしんどい時は Talk で相談
   ・最後に Behavior タブで一日を振り返る

4. 長期
   ・日々のログからパターンを学習
   ・nudge の「効く / 効かない」を学習
   ・未来シミュレーションや今日の一言サマリを改善し続ける

---

## 6. TalkタブのUX

### 6.1 ベースレイアウト（いまのスクショからの進化）

画面構造（文章で）

1. 上部
   ・左上：Anicca ロゴ（今と同じ）
   ・右上：歯車アイコン（設定）

2. その下に白いカード
   → ここを「今日のひと言 / Anicca Quote」に変える

   例：
   「今日は、自分を殴りすぎない一日にしよう。」

   ・内容は、行動ログと Moss＋Wisdom Corpus から毎日決まる
   ・短い1〜2行で、その日のテーマを示す

3. 中央
   ・ラベル：「今どんな感じ？」 / "How are you feeling?"
   ・その下に、ユーザー専用のボタンが最大 3 つ並ぶ

   例（あなたの場合）：
   [ 自己嫌悪 ]   [ 依存 ]   [ 慈悲のことば ]

   別の人の場合：
   [ 不安 ]   [ 怒り ]   [ 混乱してる ]

4. 下部
   ・長い黒ボタン：`🎙 Talk to Anicca`（現状の `Consult Anicca` をリネームするかそのまま）
   ・最下部：タブバー（Talk / Habits / Behavior）

会話ログの一覧は表示しない。
Talk は「今この瞬間の入口」としてのミニマル UI。

### 6.2 「今どんな感じ？」ボタンの体験

目的
・ユーザーが毎回言語化しなくても、
「今のしんどさ」を Anicca に渡せるようにすること。

動き

1. ボタンの中身は人ごとに違う
   ・Onboarding で選んだ Struggles
   ・最近よく話題になる内容
   ・Nudge が頻繁に出ている領域
   などから Anicca が自動で 3 つ選ぶ
   ・ユーザーも長押しなどで差し替え可能

2. 押した瞬間に、Anicca が一方的に話し始める
   ・下の Talk ボタンを押さなくても音声再生開始
   ・「あ、今自己嫌悪で潰れそうなんだな」と察してくれる

例：自己嫌悪ボタン

・あなたが「自己嫌悪」ボタンを押す
・Anicca が（Mossで過去の自己嫌悪発言を探しつつ）こう話し始める：

> 「自己嫌悪で胸が苦しくなってるね。
> 前にも『全部台無しにした』って感じた日があったよね。
> 今日も、少し似た感覚かもしれない。」

・もし話す元気があれば、下の Talk ボタンを押してマイクに向かって喋る
・話す元気がないなら、そのまま一方的な導きや慰めを聞くだけでも良い

例：慈悲のことばボタン

・押すと、あなた専用の慈悲の文言を、その場で唱えてくれる
・通勤中や電車の中で、何度でも押して聞き直せる
・これは基本「一方通行モード」

### 6.3 普通の相談（Talkボタン）

・ユーザーが「今日は全体的に話したい」と思ったら
下部の `Talk to Anicca` ボタンを押す

流れ：

1. 大ボタンタップ → Realtime セッション開始
2. Anicca：「おかえり。今日はどうだった？」
3. ユーザーがフリートーク
4. Anicca は行動ログ＋mem0＋Wisdom Corpusからコンテキストを持って返答
5. 一度のセッションは 3〜10 分程度

Talk セッションでの深い相談内容は Behavior の「今日の一言」に要約される。

---

## 7. HabitsタブのUX（簡単に）

・既存の Wake Up / Sleep / Training などのリストと編集画面を維持
・v0.3 では「時間固定アラーム型」の補助として残しつつ、
メインの「能動的 nudge」は Agent 側（行動ログ＋タイミング）で行うイメージ

---

## 8. BehaviorタブのUX

Behavior タブは「今と今日とパターンと未来」が一目で分かる画面。

### 8.1 レイアウト概要

Talk と同じ雰囲気で、カードを縦に積む。

1. 今日の一言サマリ（Now）
2. 今日の状態スナップショット（Stats）
3. 今日これからのシミュレーション（Today – Simulation）
4. パターン（Patterns）
5. 長期シミュレーション（Future Story）
6. 今取り組んでいること（You’re working on）

### 8.2 今日の一言サマリ（Now）

画面一番上の白いカード。

例：

> 「今日は自己嫌悪が強い一日だったが、
> 夜にそれを整理して、少し軽くできた。」

特徴

・Anicca が一日の行動ログと Talk 内容から要約
・その日を象徴する 2〜3 行の文章
・ユーザーはここだけ見ても「今日はどんな日だったか」を思い出せる

### 8.3 今日の状態スナップショット（Stats）

その下に、小さなカードを 3 つ並べる。

例：

Sleep カード
・「睡眠 6h35m」
・「0:45 → 7:20」
・「最近より +40 分」

Screen カード
・「スマホ 4h（SNS 2h30m）」
・「深夜 1h」

Movement カード
・「歩数 4200」
・「座りっぱなし 7h」

いずれも「今日 vs 7 日間平均」を簡単に比較できるようにする。

### 8.4 今日これからのシミュレーション（Today – Simulation）

ユーザーが Behavior を開いた瞬間の時間を起点に、
「ここから寝るまで」をシミュレートして見せる。

例（18:00 に開いたとき）：

カード文言：

> 「今日、このあと」

中身：

> 18:00–19:00  夕食・だらだらSNSになりがち
> 19:00–19:20  ここで 10 分だけ散歩 or 筋トレを入れると眠りやすくなる
> 19:30–22:30  研究・作業
> 22:30–23:00  頭を空にする時間（スマホオフ・読書）
> 23:00–07:00  睡眠（目標）

特徴

・時間が進むごとに「残りの部分」だけにアップデートされる
例：22時に開いたら
→ 22:00 以降〜翌朝までだけが表示される
・「明日」というセクションは作らず、
毎朝「その1日」のシミュレーションにリセットされるイメージ

ユーザーは

・「今から寝るまで、どういう流れで行くのが良さそうか」
・「どこで介入ポイントがあるか」

を一目で把握できる。

### 8.5 パターン（Patterns）

タイトル：「パターン」

・起床時刻のスパークライン（直近 7 日）
・SNS 時間のスパークライン
・歩数のスパークライン

それぞれに一言コメント：

・「今週は先週より平均就寝が 15 分だけ早い」
・「SNS 時間は休日に跳ね上がる傾向」
・「歩数は 3 日連続で目標未達」

数字だけでなく文章としても説明することで、
グラフが苦手な人でも理解しやすくする。

### 8.6 長期シミュレーション（Future Story）

タイトル：「少し先のあなた」

2 つのカードを並べる。

1年後カード：

> 今のままだと…
> ・平日 0:30 就寝 / 7:30 起床が定着
> ・朝の自己嫌悪はあまり変わらず、SNS 時間は 1 日 3 時間前後
>
> Anicca と一緒に少しずつ変えていくと…
> ・23:00 就寝 / 7:00 起床がほぼ習慣に
> ・朝の自己評価がマイルドになり、研究時間が 1 セッション増える

5〜10 年後カード：

> 今のままなら…
> ・慢性的な疲労と、「何も変えられない」という感覚
> ・自信は育ちにくく、行動も続かない
>
> もし今の小さな変化を続ければ…
> ・早寝早起き＋運動＋マインドフルネスが土台の生活
> ・感情と距離を取りながら、やりたいことに集中できる

ここは完全にテキストベースの「物語」。
数値ではなく、「どんな人になっているか」が伝わるようにする。

### 8.7 You’re working on（いま取り組んでいること）

画面の下部に小さく

> 「いま一緒に取り組んでいること」

と出し、

・[ 夜更かし ]
・[ SNS依存 ]
・[ 自己嫌悪 ]

のようなチップを表示。
タップすると、設定画面（Profile/Settings）にジャンプして
理想や Struggle の編集ができる。

Behavior 画面は編集よりも「現在地の把握」を優先する。

---

## 9. 通知・NudgeのUX

### 9.1 基本のスタイル

・文末は「〜しませんか？」ではなく
「今は〇〇をしよう」「ここで手放そう」といった**命令＋慈愛**
・責めるのではなく、「過去の自分の言葉」「価値観」「未来の自分」からの鏡

例：夜更かしの通知

> 「前に『夜にスマホを見ると翌朝全部台無しになる』って言っていたよね。
> 今日も同じパターンになりかけている。
> ここで一度スマホを置いて、明日の君を守ろう。」

### 9.2 失敗時のフォローアップ

・通知を開かなかった
・Nudge 後も SNS を見続けている
など「効いていない」と判定された場合は、

30〜60 分後に一度だけフォローアップ通知：

> 「さっきの声は届かなかったみたいだね。
> もしまだ起きているなら、少しだけ話そう。」

押すと Talk に遷移して、Anicca が話し始める。

---

## 10. Moss / Exa を前提にした「記憶と知識」のUX

### 10.1 Moss（内側の世界の検索）

ユーザー体験のまとめ：

・Anicca は
過去の会話・後悔・成功・メモを **本当に覚えていて**
必要なときに引用してくる
・Talk の一番上の「今日のひと言」や、
対話中の「この前こんなこと言っていたよね」が、
その日の文脈にドンピシャ

Moss の役割は

・mem0 に保存された「ユーザーの記憶」と
・Anicca Wisdom Corpus（仏教＋CBT＋あなたのノート）

から、その場のテーマに最も近いものを瞬時に引き出すこと。

### 10.2 Exa（外の世界の研究）

ユーザー体験のまとめ：

・オンボーディングで選んだ Struggles（夜更かし、依存、自己嫌悪…）について
Anicca が裏で徹底的に調べておいてくれる
・Behavior や News 的な部分で
「あなたの問題に効きそうな最新の知識」を 3〜5 行の形で届けてくれる
・nudge がうまくいかない領域が出てきたときは、
そのテーマについてまた Exa で深く検索し、
新しいアプローチを静かに取り入れていく

結果として、

・Anicca は **“あなたの生活ログ” と “外の世界の知恵”** を両方持ち、
・その両方を使って音声・通知・Behavior の文章を紡ぐ導師になる。

---

これが v0.3 の「理想的なユーザー体験」の全体像。
ここをベースに、次は

・各セクションごとの具体プロンプト
・画面ごとの SwiftUI コンポーネント設計

に落としていけば、そのまま実装フェーズに移れるはず。
