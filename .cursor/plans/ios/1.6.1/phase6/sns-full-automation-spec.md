# Phase 6: SNS完全自動化

## 概要

SNS投稿プロセスを完全自動化し、エージェントが自律的にコンテンツをリサーチ・作成・投稿できるようにする。

### 目標

- ユーザーの「投稿して」指示なしで、自律的にコンテンツを準備
- Slack承認ワークフローで最終確認のみユーザーが行う
- 毎日の投稿が自動で回る仕組みを構築

---

## 現状（As-Is）

| ステップ | 状態 | 問題 |
|---------|------|------|
| 画像生成 | ✅ 自動 | Fal.ai (Nano Banana Pro) |
| 動画生成 | ✅ 自動 | Remotion |
| 投稿API | ✅ 自動 | Blotato API |
| コンテンツ決定 | ❌ 手動 | 毎回ユーザーが指示 |
| 投稿トリガー | ❌ 手動 | 毎回ユーザーが指示 |
| スケジュール実行 | ❌ 手動 | cron/スケジューラーなし |

---

## 理想（To-Be）

### ワークフロー

```
┌────────────────────────────────────────────────────────────┐
│  ① 自律リサーチ（エージェントが自動実行）                  │
│  ・トレンド調査、競合分析、効果的なコンテンツを探す        │
│  ・「苦しみを減らす」軸で良いコンテンツを判断              │
├────────────────────────────────────────────────────────────┤
│  ② アセット活用（ユーザーが追加したものを使う）            │
│  ・assets/ フォルダに画像・動画・テキストを追加            │
│  ・過去のアセット + 新規アセットから選ぶ                   │
├────────────────────────────────────────────────────────────┤
│  ③ コンテンツ作成（エージェントが作成）                    │
│  ・Hook + Caption + Media（画像 or カルーセル or 動画）    │
│  ・Remotionで動画も自分で作れる                            │
│  ・画像はFal.ai (Nano Banana) で生成                       │
├────────────────────────────────────────────────────────────┤
│  ④ 承認待ち（Slackでユーザーに見せる）                     │
│  ・Slackに「次の投稿はこれ」と送る                         │
│  ・Hook、Caption、Media（リンク or プレビュー）を表示      │
│  ・ユーザーが「OK」と返信するまで待つ                      │
├────────────────────────────────────────────────────────────┤
│  ⑤ 自動投稿（OKが来たら）                                  │
│  ・次の投稿スロット（19:00 or 20:00）に自動スケジュール    │
│  ・各プラットフォームに投稿                                │
│  ・ログ更新・結果通知                                      │
└────────────────────────────────────────────────────────────┘
```

---

## 実装タスク

### Phase 6.1: スキルファイル作成

コンテンツ作成のベストプラクティスをスキル化する。

```
/.cursor/skills/content-creation/
├── SKILL.md           # スキル概要
├── research.md        # 良いコンテンツの探し方
├── evaluate.md        # 「苦しみを減らす」軸での評価基準
├── formats.md         # 画像/カルーセル/動画の使い分け
├── hooks.md           # 効果的なHookの書き方
└── platforms.md       # プラットフォーム別の最適化
```

**成果物:**
- [ ] `SKILL.md` 作成
- [ ] `research.md` 作成
- [ ] `evaluate.md` 作成
- [ ] `formats.md` 作成
- [ ] `hooks.md` 作成
- [ ] `platforms.md` 作成

---

### Phase 6.2: アセット管理フォルダ

ユーザーが素材を追加し、エージェントが活用するフォルダ構造。

```
sns-poster/assets/
├── images/            # 使える画像素材
├── videos/            # 使える動画素材
├── quotes/            # 仏教名言・コンテンツテキスト
│   └── quotes.json    # 構造化された名言データ
├── hooks/             # 過去に効果的だったHook集
│   └── hooks.json     # 構造化されたHookデータ
└── README.md          # アセット追加方法の説明
```

**成果物:**
- [ ] フォルダ構造作成
- [ ] `quotes.json` 初期データ（50+エントリ）
- [ ] `hooks.json` 初期データ（20+エントリ）
- [ ] `README.md` 作成

---

### Phase 6.3: 自動コンテンツ生成スクリプト

エージェントが自律的にコンテンツを生成するスクリプト。

```
sns-poster/
├── auto_content.py        # メインスクリプト
├── content_generator.py   # LLMでキャプション生成
├── asset_selector.py      # アセット選択ロジック
└── content_queue.json     # 生成済み・承認待ちコンテンツ
```

**機能:**
1. アセットフォルダをスキャン
2. LLMで最適なコンテンツを決定
3. Hook + Caption + Media を生成
4. `content_queue.json` に保存

**成果物:**
- [ ] `auto_content.py` 作成
- [ ] `content_generator.py` 作成
- [ ] `asset_selector.py` 作成
- [ ] `content_queue.json` スキーマ定義

---

### Phase 6.4: Slack承認ワークフロー

生成したコンテンツをSlackに送り、承認を待つ。

**フロー:**
```
エージェント → Slack:
「次の投稿準備できました」
━━━━━━━━━━━━━━━━━━━━━━
📱 Platform: @aniccaxxx (X JP)
🎣 Hook: 6年間、何も変われなかった
📝 Caption: [テキスト]
🖼️ Media: [画像/動画リンク]
━━━━━━━━━━━━━━━━━━━━━━
「OK」で投稿、「NG」で却下

ユーザー → Slack: 「OK」

エージェント → 投稿実行 → 完了通知
```

**成果物:**
- [ ] Slack Webhook設定
- [ ] `slack_notifier.py` 作成
- [ ] 承認待ちステータス管理
- [ ] 承認後の自動投稿トリガー

---

### Phase 6.5: スケジューラー（GitHub Actions）

毎日自動でコンテンツを準備・投稿する。

```yaml
# .github/workflows/daily_sns_post.yml
name: Daily SNS Post

on:
  schedule:
    - cron: '0 10 * * *'  # 19:00 JST

jobs:
  prepare_content:
    # 1. コンテンツ生成
    # 2. Slack通知
    
  post_approved:
    # 承認済みコンテンツを投稿
```

**成果物:**
- [ ] `daily_sns_post.yml` 作成
- [ ] 環境変数設定（API keys）
- [ ] エラーハンドリング
- [ ] 結果通知

---

## プラットフォーム設定（参照）

| アカウント | ID | 言語 | コンテンツ | 時間 |
|-----------|-----|------|-----------|------|
| @aniccaxxx (X) | 11820 | JP | BIP | 20:00 |
| @aniccaen (X) | 11852 | EN | MKT | 20:00 |
| @anicca.ai (IG) | 28896 | EN | MKT | 19:00 |
| @anicca.japan (IG) | 28897 | JP | MKT | 19:00 |
| @anicca.daily (IG) | 28682 | EN | MKT | 19:00 |
| @anicca.japan (Threads) | 4464 | JP | MKT | 19:00 |
| Daisuke Narita (YT) | 25421 | EN | MKT | 19:00 |
| @anicca.jp (YT) | 25646 | JP | MKT | 19:00 |

**注意:** TikTokは別ツールで手動投稿（Blotato経由ではない）

---

## コンテンツ哲学（必読）

### 原則

1. **SNSはそれ自体がプロダクト** - インストール導線ではない
2. **仏教的世界観を軸にする** - 貪り・怒り・分断を煽らない
3. **読者中心のスタンス** - 主語は「あなた」「多くの人は」
4. **長期思考** - 1投稿のバイラル < 100投稿の信頼

### 投稿前チェックリスト

- [ ] このアカウントは「広告アカウント」に見えないか？
- [ ] このコンテンツは誰かの苦しみを少しでも減らすか？
- [ ] 五戒に反していないか？（嘘・傷つけ・貪り…）

---

## 依存関係

- Fal.ai API（画像生成）
- Blotato API（投稿）
- Remotion（動画生成）
- Slack Webhook（承認ワークフロー）
- GitHub Actions（スケジューラー）
- OpenAI/Claude API（キャプション生成）

---

## 実装順序（推奨）

| Phase | タスク | 見積もり |
|-------|--------|----------|
| 6.1 | スキルファイル作成 | 2時間 |
| 6.2 | アセット管理フォルダ | 1時間 |
| 6.3 | 自動コンテンツ生成 | 4時間 |
| 6.4 | Slack承認ワークフロー | 3時間 |
| 6.5 | GitHub Actions | 2時間 |

**合計:** 約12時間

---

## 備考

- このspecは他のエージェントが実装できるレベルで詳細化する
- 各Phaseごとに別ファイルに分割してもOK
- TikTokは投稿対象外（別ツールで手動）

