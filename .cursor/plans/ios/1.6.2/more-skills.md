並列サブエージェントで深掘り検索を実行します。

[4 tools called]

全4つのサブエージェントから調査結果を取得しました。以下にまとめます。

---

## 調査結果サマリー

### 1. QMD Skill（トークン95%削減）

| 項目 | 内容 |
|------|------|
| **仕組み** | マークダウン用ローカル検索エンジン。BM25 + ベクトル検索のハイブリッド |
| **削減メカニズム** | 全ドキュメントをコンテキストに入れず、必要時に検索して関連部分だけ取得 |
| **計算例** | 従来20,000トークン → QMD使用1,500トークン ≈ **92.5%削減** |
| **適用先** | 大規模なAGENTS.md/skills/ドキュメントベース |
| **制限** | インデックス作成必要、ローカル実行（~2GB）、リアルタイム更新不可 |

**Anicca/Cursor適用案**: スキルファイルや仕様書が増えた場合、QMD MCPサーバーで検索ベースに切り替え可能

---

### 2. Supermemory（無限メモリ）

| 項目 | 内容 |
|------|------|
| **仕組み** | グラフベース + RAGハイブリッドの永続メモリ基盤 |
| **統合方法** | MCP Server / OpenClaw Plugin / Claude Code Plugin |
| **機能** | Auto-Recall（自動検索）、Auto-Capture（自動保存）、時系列コンテキスト |
| **iOS開発適用** | 過去の実装決定、アーキテクチャ選択、バグパターンを長期記憶 |
| **注意** | Proプラン必須、クラウドベース課金 |

**Anicca適用案**: プロジェクトルール、ペルソナ、技術的制約をセッション間で保持

---

### 3. OpenClaw最適化戦略

| 戦略 | 内容 |
|------|------|
| **モデル階層** | Opus（推論）→ Sonnet（日常）→ DeepSeek/Mini（ルーティン）で60-80%コスト削減 |
| **コンテキスト管理** | 120kで警告開始、150kで強制圧縮、180kでセッション分割 |
| **自動復旧** | systemd Watchdog + 5分間隔cronでサービス監視 |
| **クロス通知** | Telegram→Slack高優先転送、優先度ベースルーティング |
| **バックアップ** | Git（設定）+ S3（セッション）、日次自動 |
| **Gru** | 複数エージェントオーケストレーション（Telegram/Discord経由） |

---

### 4. セキュリティチェックリスト（重要抜粋）

| カテゴリ | 最重要項目 |
|---------|-----------|
| **アクセス制御** | DMポリシー=pairing、許可リスト明示、`"*"`禁止 |
| **ツール** | 最小権限、危険ツール制限（exec, browser, web_fetch） |
| **プロンプトインジェクション** | 検出実装、未信頼コンテンツ分離、リンク=未信頼扱い |
| **データ保護** | PII自動検出、シークレットスキャン、ログ機密情報削除 |
| **ネットワーク** | Gateway認証必須、ループバックバインディング |

---

## Aniccaへの適用優先度

| 技術 | 適用先 | 優先度 | 理由 |
|------|--------|--------|------|
| **モデル階層** | API（LLM Nudge生成） | ★★★★★ | Sonnetでほとんど処理、Miniで軽量タスク→大幅コスト削減 |
| **Supermemory** | Cursor/Claude Code | ★★★★☆ | プロジェクトコンテキスト保持で効率化 |
| **QMD** | Cursor | ★★★☆☆ | スキル/ドキュメント増加時に有効 |
| **セキュリティ監査** | 全体 | ★★★★☆ | OWASP LLM Top 10対応 |
| **コンテキスト圧縮** | Cursor | ★★★☆☆ | 長時間セッションのフリーズ防止 |

---

## 今すぐできるアクション

| アクション | 工数 | 効果 |
|-----------|------|------|
| **1. API側でモデル階層導入** | 4h | LLM Nudge生成を`gpt-4o-mini`で処理、複雑な場合のみSonnet |
| **2. Supermemory MCP追加** | 1h | `npx -y install-mcp@latest https://mcp.supermemory.ai/mcp --client cursor` |
| **3. セキュリティ自己監査** | 2h | 上記チェックリストを`.claude/security-checklist.md`に保存して定期確認 |

導入したいものがあれば教えてください。実装を開始します。

## 面白いポイント

| ポイント | 詳細 |
|---------|------|
| **責務分離** | ElevenLabs = 音声層、OpenClaw = 知能層。それぞれの得意分野に集中 |
| **標準プロトコル** | OpenAI `/chat/completions` 互換なので、どのLLMバックエンドでも差し替え可能 |
| **電話統合** | Twilio連携で実際の電話番号を持てる。運転中に「Aniccaどうなった？」と聞ける |
| **ngrok必須** | ローカルのOpenClawを公開するためのトンネル。本番ではCloudflare Tunnel等に置き換え |

## Aniccaへの応用アイデア

| ユースケース | 説明 |
|-------------|------|
| **電話でNudge受信** | ユーザーが電話をかけるとAniccaが「今日の調子どう？」と話しかける |
| **音声でTell Anicca** | 電話で問題を話すと、Aniccaが聞いて記録・アドバイス |
| **開発者向け** | 開発者が電話でビルド状況やテスト結果を確認 |

ただし、これはOpenClaw（Claude Code/Clawdbot）をバックエンドとして使う構成なので、Aniccaの既存APIに直接適用するには別のアプローチが必要です。


