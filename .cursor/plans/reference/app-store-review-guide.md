# App Store審査ガイド - 完全版

> **出典**: "How to get approved on the App Store (the caveman way)"  
> **目的**: リリース前の必須チェックリスト  
> **最終更新**: 2025-01-XX

---

## 【原文】コアメッセージ

**「Apple承認は難しくない。人々がそれを過度に考えたり、賢く見せようとしたりしているだけ。Appleはアプリが機能し、正直で、完全なアプリを望んでいる—完璧ではなく。」**

### 重要なポイント

- ❌ **完璧にしよう**と必死になるから落ちる
- ❌ **ルールを工夫で回避しよう**と考えるから落ちる
- ✅ **ちゃんと完成させて、正直に出す**なら通る

---

## ルール1: すべてはクリアでなければならない

### 原文

「ベータテキストはなし、『近日公開』はなし、未完成の画面はなし、フェイクフローはなし。v1はシンプルでいいが、完成したように感じなければならない。」

### 意味

- ❌ **ダメな例**:
  - 「このボタンはまだ完成していません」
  - 「v2で追加予定」
  - 「beta」とラベル付け
  - 「Coming Soon」テキスト

- ✅ **いい例**:
  - 完成してなくても「完成した」ように見せる
  - ボタンは押せる状態にする
  - テキストは確定させる
  - v1は「シンプル」でいいけど「完成した」に見えなきゃダメ

### Aniccaチェックリスト

- [ ] オンボーディングに「beta」「coming soon」などの未完成を示すテキストがないか
- [ ] すべてのボタンが実際に動作するか
- [ ] 未実装機能への言及がないか
- [ ] すべての画面が「完成した」ように見えるか
- [ ] フェイクフロー（見た目だけの画面）がないか

---

## ルール2: 利用規約とプライバシーポリシー（必須）

### 原文

「あなたのアプリは利用規約とプライバシーポリシーにリンクしなければならない。実際のURL、公開ページ、アプリ内と App Store Connect に両方追加されている。これだけがないと却下される。」

### 重要なポイント

- **これだけがないと却下される**（最重要）
- 実際のURL（ウェブページ）
- アプリ内にも表示
- App Store Connect にも登録
- **両方が必須**

### よくある落ちる理由

- 「Webサイトにはあるけど、アプリ内にないから却下」
- 「アプリ内にはあるけど、App Store Connectに登録してないから却下」

### Aniccaの現状

**実装済み**:
- ✅ アプリ内表示: `LegalLinksView.swift`で実装済み
- ✅ プライバシーポリシーURL: `https://aniccaai.com/privacy/{lang}`
- ✅ 利用規約URL: Apple EULA (`https://www.apple.com/legal/internet-services/itunes/dev/stdeula/`)

**確認が必要**:
- [ ] App Store Connectに利用規約・プライバシーポリシーのURLが登録されているか
- [ ] プライバシーポリシーのURLが正しく公開されているか（すべての言語で）
- [ ] リンクが正しく動作するか（404エラーがないか）

### 実装場所

```swift
// aniccaios/aniccaios/Views/LegalLinksView.swift
struct LegalLinksView: View {
    var body: some View {
        VStack(spacing: 8) {
            Link(String(localized: "legal_privacy_policy"), destination: privacyURL)
            Link(String(localized: "legal_terms_of_use"), destination: URL(string: "https://www.apple.com/legal/internet-services/itunes/dev/stdeula/")!)
        }
    }
    
    private var privacyURL: URL {
        let lang = AppState.shared.userProfile.preferredLanguage.rawValue
        return URL(string: "https://aniccaai.com/privacy/\(lang)")!
    }
}
```

---

## ルール3: サブスクリプション設定

### 原文

「サブスクリプションがある場合は、それらを正しく設定する。アプリストアリストに追加し、すべてのビジネス契約を受け入れ、アプリ内の価格について明確にする。v1の場合、割引またはフェイク緊急ペイウォールを使用しないでください。」

### 重要なポイント

- ビジネス契約に同意
- 価格を正確に表示
- **v1の場合、割引やフェイク緊急ペイウォールを使うな**

### ❌ ダメな例

- 「今だけ10円！（普通は1000円）」
- 「24時間だけ50%OFF」
- 「緊急！今すぐ購入しないと値上げ！」
- 「限定オファー！残り3時間！」

### ✅ いい例

- 「月500円、年5,000円」と正確に
- 価格は明確に表示
- 緊急感を煽らない

### Aniccaチェックリスト

- [ ] RevenueCatのビジネス契約に同意済みか
- [ ] アプリ内の価格表示が正確か（RevenueCatの設定と一致しているか）
- [ ] 「今だけ割引」などの緊急訴求がないか
- [ ] フェイク緊急ペイウォール（時間制限の嘘）がないか
- [ ] サブスクリプションの説明が明確か

---

## ルール4: アカウント削除機能（必須）

### 原文

「ユーザーがアカウントを作成する場合、アプリ内でアカウント削除をサポートする必要があります。メールのみではなく、「サポートに連絡」でもなく、実際にUI内に。また、強制的に実名を使用しないでください—ニックネームまたはユーザー名を使用してください。」

### 重要なポイント

- **メール送信、サポート連絡ではなく、アプリ内UIで削除できる**
- 必須: ユーザーが「設定」→「アカウント削除」を押したら消える
- メールを待つ必要がない
- UI内で完結
- ニックネーム対応: 実名強制するな、ユーザー名で十分

### Aniccaの現状

**実装済み**:
- ✅ アプリ内UIで削除可能: `ProfileView.swift`の`accountManagementSection`
- ✅ メール送信ではなく、直接削除: `deleteAccount()`関数でAPI呼び出し
- ✅ 削除後の完全リセット: `signOutAndWipe()`で全データ削除

**確認が必要**:
- [ ] 削除機能が正しく動作するか（テストアカウントで確認）
- [ ] 削除後の動作確認（`signOutAndWipe()`で完全にリセットされるか）
- [ ] エラーハンドリングが適切か（ネットワークエラー時など）

### 実装場所

```swift
// aniccaios/aniccaios/Views/Profile/ProfileView.swift
private var accountManagementSection: some View {
    // ...
    Button {
        isShowingDeleteAlert = true
    } label: {
        HStack {
            Text(String(localized: "settings_delete_account"))
                .foregroundStyle(.red)
            Spacer()
        }
        .padding(.vertical, 16)
    }
    // ...
}

private func deleteAccount() async {
    // DELETE /api/mobile/account を呼び出し
    // 成功時に signOutAndWipe() を実行
}
```

---

## ルール5: ブロック・レポート機能（社会機能がある場合）

### 原文

「アプリにコミュニティ、チャット、またはソーシャル機能がある場合、ユーザーは他をブロックおよび報告できる必要があります。例外はありません。これがない場合、Appleはあなたを却下します。」

### 重要なポイント

- **例外はありません**
- **これがないと却下される**
- チャット、コミュニティ、ソーシャル機能があったら必須

### Aniccaの現状

- ✅ **該当しない**: Aniccaは音声対話アプリで、ユーザー間のコミュニケーション機能はない
- ✅ AIとの1対1の対話のみ

**確認**:
- [ ] 将来的にソーシャル機能を追加する場合は、必ずブロック・レポート機能も実装する

---

## ルール6: テストが命

### 原文

「アプリが実際に機能することを確認してください。すべてのフロー、すべてのボタン、すべての画面をテストしてください。特に iPad 第5世代でテストしてください。レビュアーはしばしばそれを使用しているため。ほとんどの却下は単なるクラッシュまたは壊れたロジックです。」

### 重要なポイント

- **すべてのフロー、すべてのボタン、すべての画面をテスト**
- **特に iPad 第5世代でテスト**（レビュアーが使用）
- **ほとんどの却下はクラッシュか壊れたロジック**

### Appleは「完璧さ」を求めてない

- 「ちゃんと動く」ことだけを求めてる
- 「シンプルだけどちゃんと動く」> 「豪華だけどバグある」

### Aniccaチェックリスト

- [ ] **iPad第5世代でテスト済みか**（最重要）
- [ ] オンボーディングフロー全体の動作確認
  - [ ] ウェルカム画面
  - [ ] マイクロフォン権限要求
  - [ ] 通知権限要求
  - [ ] Sign in with Apple
  - [ ] プロフィール情報入力
  - [ ] 習慣選択・時刻設定
  - [ ] ペイウォール表示
  - [ ] 完了画面
- [ ] 音声セッション開始・終了フローの動作確認
- [ ] サブスクリプション購入フローの動作確認
- [ ] アカウント削除フローの動作確認
- [ ] すべてのボタンが動作するか
- [ ] クラッシュがないか（特にメモリ不足時）
- [ ] ネットワークエラー時の動作確認

---

## ルール7: App Store ページは正直に

### 原文

「App Store ページは正直である必要があります。アプリが何をするかを明確に説明し、コア機能の実際のスクリーンショットを表示し、競争相手について言及したり、まだ持っていない機能について言及しないでください。」

### ❌ ダメな例

- 「AIで自動作成」（実はAI使ってない）
- 「競合より優れている」
- 「今後追加予定機能」をまるで今あるように
- 実際の画面ではないスクリーンショット

### ✅ いい例

- 「何ができるか」を明確に
- 「実際のスクリーンショット」を見せる
- 「持ってない機能は言わない」

### Aniccaチェックリスト

- [ ] App Storeページの説明が実際の機能と一致しているか
- [ ] スクリーンショットが実際の画面か（デザイン案ではないか）
- [ ] 「AIで自動作成」など、実装と異なる表現がないか
- [ ] 競合について言及していないか
- [ ] 未実装機能への言及がないか
- [ ] コア機能が明確に説明されているか

---

## ルール8: AI/LLM使用時

### 原文

「著作権のあるコンテンツを所有していないものを使用しないでください。機能を隠さないでください。AI または LLM を使用する場合は、基本的なセーフガードを追加し、使用方法について明確にしてください。」

### 重要なポイント

- AI/LLM使ってるなら、基本的なセーフガード追加
- 「AI使ってます」と明記
- 隠さない
- 悪質な結果を防ぐフィルタを入れる

### Aniccaの現状

- ✅ OpenAI Realtime APIを使用
- ✅ 音声対話機能でAIを使用

**確認が必要**:
- [ ] プライバシーポリシーにAI使用の記載があるか
- [ ] App StoreページにAI使用の記載があるか
- [ ] 不適切な出力を防ぐフィルタが実装されているか
- [ ] セーフガード（コンテンツフィルタリング）が実装されているか

---

## ルール9: レビュアーへの対応

### 原文

「レビュアーがアクセスする必要がある場合、テストアカウントを提供して簡単な指示を与えてください。画面録画は複雑なフロー向けにたくさん助けになります。」

### 重要なポイント

- テストアカウント提供
- 簡単な指示を与える
- 画面録画は複雑なフロー向けに効果的

### Aniccaの準備

- [ ] テストアカウントの準備
  - [ ] Sign in with Appleのテストアカウント
  - [ ] サブスクリプション購入済みのテストアカウント
- [ ] レビュアー向けの簡単な手順書
  - [ ] オンボーディングフローの説明
  - [ ] 音声セッション開始の手順
- [ ] 画面録画の準備
  - [ ] 音声セッション開始の画面録画
  - [ ] オンボーディングフローの画面録画

### App Store Connectでの設定

- [ ] テストアカウント情報を「レビュー情報」セクションに追加
- [ ] 簡単な手順を「メモ」に記載
- [ ] 必要に応じて画面録画を添付

---

## ルール10: 却下されたら

### 原文

「却下を受けた場合、迅速に対応して、彼らが言った通りに正確に修正してください。議論しないでください、説明しすぎないでください、ただ従ってください。」

### ❌ ダメな対応

- 「でも我々は...」
- 「実は...」
- 「ルール違反じゃないはずだ」
- 長々と説明する

### ✅ いい対応

- 「言われたことを正確に修正する」
- 「再度申請」
- 簡潔に修正内容を説明

### 対応フロー

1. 却下理由を正確に理解する
2. 指摘された問題を修正する
3. 修正内容を簡潔に説明する
4. 再申請する

---

## 最後の一言

### 原文

**「Apple は完璧なアプリではなく、品質のあるアプリを望んでいます。」**

### 意味

- **「完璧」** = すべて高機能で最高品質
- **「品質」** = ちゃんと動いて、正直で、ルール守ってる

### つまり

**「シンプルだけどちゃんと動く」> 「豪華だけどバグある」**

---

## Aniccaプロジェクト - 完全チェックリスト

### リリース前の必須確認項目

#### 1. クリアさの確認
- [ ] オンボーディングに「beta」「coming soon」などの未完成を示すテキストがないか
- [ ] すべてのボタンが実際に動作するか
- [ ] 未実装機能への言及がないか
- [ ] すべての画面が「完成した」ように見えるか
- [ ] フェイクフロー（見た目だけの画面）がないか

#### 2. 利用規約・プライバシーポリシー
- [x] アプリ内表示: `LegalLinksView.swift`で実装済み
- [ ] **App Store Connectに利用規約・プライバシーポリシーのURLが登録されているか**
- [ ] プライバシーポリシーのURLが正しく公開されているか（すべての言語で）
- [ ] リンクが正しく動作するか（404エラーがないか）

#### 3. サブスクリプション
- [ ] RevenueCatのビジネス契約に同意済みか
- [ ] アプリ内の価格表示が正確か（RevenueCatの設定と一致しているか）
- [ ] 「今だけ割引」などの緊急訴求がないか
- [ ] フェイク緊急ペイウォール（時間制限の嘘）がないか
- [ ] サブスクリプションの説明が明確か

#### 4. アカウント削除
- [x] アプリ内UIで削除可能: 実装済み
- [x] メール送信ではなく、直接削除: 実装済み
- [ ] 削除機能が正しく動作するか（テストアカウントで確認）
- [ ] 削除後の動作確認（完全にリセットされるか）

#### 5. ブロック・レポート機能
- [x] 該当しない（ユーザー間コミュニケーション機能なし）

#### 6. テスト
- [ ] **iPad第5世代でテスト済みか**（最重要）
- [ ] オンボーディングフロー全体の動作確認
- [ ] 音声セッション開始・終了フローの動作確認
- [ ] サブスクリプション購入フローの動作確認
- [ ] アカウント削除フローの動作確認
- [ ] すべてのボタンが動作するか
- [ ] クラッシュがないか（特にメモリ不足時）
- [ ] ネットワークエラー時の動作確認

#### 7. App Storeページ
- [ ] App Storeページの説明が実際の機能と一致しているか
- [ ] スクリーンショットが実際の画面か（デザイン案ではないか）
- [ ] 「AIで自動作成」など、実装と異なる表現がないか
- [ ] 競合について言及していないか
- [ ] 未実装機能への言及がないか
- [ ] コア機能が明確に説明されているか

#### 8. AI/LLM使用
- [ ] プライバシーポリシーにAI使用の記載があるか
- [ ] App StoreページにAI使用の記載があるか
- [ ] 不適切な出力を防ぐフィルタが実装されているか
- [ ] セーフガード（コンテンツフィルタリング）が実装されているか

#### 9. レビュアー対応
- [ ] テストアカウントの準備
- [ ] レビュアー向けの簡単な手順書
- [ ] 画面録画の準備（複雑なフロー用）
- [ ] App Store Connectの「レビュー情報」セクションに情報を追加

#### 10. 却下時の対応準備
- [ ] 却下理由を正確に理解する体制
- [ ] 迅速に修正できる体制
- [ ] 再申請の手順を理解している

---

## 実装済み機能の確認

### ✅ 実装済み

1. **利用規約・プライバシーポリシー**
   - ファイル: `aniccaios/aniccaios/Views/LegalLinksView.swift`
   - アプリ内に表示済み

2. **アカウント削除機能**
   - ファイル: `aniccaios/aniccaios/Views/Profile/ProfileView.swift`
   - UI内で削除可能
   - API呼び出しで直接削除
   - 削除後の完全リセット実装済み

### ⚠️ 確認が必要

1. **App Store Connectへの登録**
   - 利用規約・プライバシーポリシーのURL登録

2. **テスト**
   - iPad第5世代でのテスト

3. **App Storeページ**
   - 説明とスクリーンショットの整合性

4. **AI使用の明記**
   - プライバシーポリシーへの記載
   - App Storeページへの記載

---

## リリース前の最終チェック

### 提出前の確認

1. [ ] このチェックリストのすべての項目を確認
2. [ ] iPad第5世代で全フローをテスト
3. [ ] App Store Connectの情報を確認
4. [ ] テストアカウント情報を準備
5. [ ] レビュアー向け手順書を準備

### 提出後

- [ ] 却下された場合は、理由を正確に理解
- [ ] 指摘された問題を修正
- [ ] 簡潔に修正内容を説明
- [ ] 再申請

---

## 参考資料

- [Apple App Store Review Guidelines](https://developer.apple.com/app-store/review/guidelines/)
- [RevenueCat Documentation](https://www.revenuecat.com/docs)
- Aniccaプロジェクト: `/Users/cbns03/Downloads/anicca-project`

---

**最終更新**: 2025-01-XX  
**次回リリース時にこのチェックリストを確認すること**

