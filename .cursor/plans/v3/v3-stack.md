ã“ã“ã‹ã‚‰ã¯ã€Œã©ã†å®Ÿè£…ã™ã‚‹ã‹ã€ã®æŠ€è¡“ä»•æ§˜ã ã‘ã«æŒ¯ã‚Šåˆ‡ã‚‹ã­ã€‚
DB è¨­è¨ˆã¯ä¸€æ—¦å¿˜ã‚Œã¦ã€ã‚¹ã‚¿ãƒƒã‚¯ã¨ã‚µãƒ¼ãƒ“ã‚¹æ§‹æˆãƒ»ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼ã«é›†ä¸­ã™ã‚‹ã€‚

---

## 1. å…¨ä½“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

ãƒ¬ã‚¤ãƒ¤ãƒ¼æ§‹æˆã¯ã“ã†æ±ºã‚ã‚‹ã€‚

1. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

   1. iOS ã‚¢ãƒ—ãƒªï¼ˆSwiftUIï¼‰
      OpenAI Realtime APIï¼ˆWebRTCï¼‰ã§éŸ³å£°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨æ¥ç¶š
      Realtime ã® tool å‘¼ã³å‡ºã—ã‚’å—ã‘ã¦ã€è‡ªå‰ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã« HTTP ã§æŠ•ã’ã‚‹

2. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆPythonï¼‰

   1. Gateway / Tools APIï¼ˆFastAPIï¼‰
      iOS ã‹ã‚‰ã® HTTP ã‚’å—ã‘ã‚‹çª“å£ã€‚Realtime ã® tool ã‚’å…¨éƒ¨ã“ã“ã«ãƒãƒƒãƒ”ãƒ³ã‚°
   2. Memory Serviceï¼ˆmem0ï¼‰([GitHub][1])
      å¯¾è©±ãƒ»ç†æƒ³ãƒ»ã‚¹ãƒˆãƒ©ã‚°ãƒ«ãƒ»è¡Œå‹•è¦ç´„ãªã©ã€Œãã®äººã®æ„å‘³è¨˜æ†¶ã€ã‚’ä¿æŒ
   3. Nudge Policy Serviceï¼ˆcontextual banditsï¼‰([GitHub][3])
      çŠ¶æ…‹ãƒ™ã‚¯ãƒˆãƒ«ã‹ã‚‰ã€Œã©ã® Nudge ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã†ã‹ã€ã‚’é¸æŠ
   5. Simulation Serviceï¼ˆOpenAI Chat / Realtimeï¼‰([OpenAI Platform][4])
      ä»Šæ—¥æ®‹ã‚Šãƒ»æ˜æ—¥ãƒ»1/5/10 å¹´å¾Œã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ç”Ÿæˆ
   6. Observability / Eval Serviceï¼ˆLangfuse + TruLensï¼‰([Langfuse][5])
      LLM å‘¼ã³å‡ºã—ãƒ»tool å‘¼ã³å‡ºã—ãƒ»Nudge æˆåŠŸç‡ã‚’ãƒˆãƒ¬ãƒ¼ã‚¹ï¼†è©•ä¾¡

3. ãƒ†ã‚¹ãƒˆãƒ»é–‹ç™ºç”¨ãƒ„ãƒ¼ãƒ«

   1. Maestroï¼ˆiOS UI E2E ãƒ†ã‚¹ãƒˆï¼‰([GitHub][6])

ä»¥é™ã¯ã€ã“ã®æ§‹æˆã«æ²¿ã£ã¦å…·ä½“çš„ãªå®Ÿè£…ã®ä»•æ–¹ã‚’æ›¸ãã€‚

---

## 2. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆiOSï¼‰å®Ÿè£…

### 2.1 éŸ³å£°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆTalk ã‚¿ãƒ–ï¼‰

ä½¿ç”¨æŠ€è¡“

1. Swift 5.10
2. SwiftUI ã§ UI
3. AVAudioEngine + WebRTC ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
4. OpenAI Realtime APIï¼ˆWebRTC æ¥ç¶šï¼‰([OpenAI Platform][4])

ãƒ•ãƒ­ãƒ¼

1. ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹

   1. ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã® `user_id` ã‚„ OS æƒ…å ±ã‚’å«ã‚€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ
   2. OpenAI Realtime API ã« WebRTC ã§æ¥ç¶š
   3. Realtime ã® system prompt ã«ã€ŒAnicca ã¨ã—ã¦è©±ã™ã“ã¨ã€ã€Œä½¿ç”¨ã™ã‚‹ tools ã® JSON schemaã€ã‚’å®šç¾©ã—ã¦é€ä¿¡

2. éŸ³å£°é€å—ä¿¡

   1. ãƒã‚¤ã‚¯å…¥åŠ›ã‚’ AVAudioEngine ã§å–å¾—ã—ã€Opus ãªã©ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦ Realtime ã«ã‚¹ãƒˆãƒªãƒ¼ãƒ 
   2. Realtime ã‹ã‚‰ã® `response.audio.delta` ã‚’å—ã‘ã¦å†ç”Ÿ
   3. Realtime ã‹ã‚‰ã® `response.output_text.delta` ã‚‚ UI ã§å­—å¹•è¡¨ç¤º

3. tool å‘¼ã³å‡ºã—

   1. Realtime ã®å‡ºåŠ›ã§ `tool_call` ãŒæ¥ãŸã‚‰ã€iOS å´ã§ãƒ‘ãƒ¼ã‚¹
   2. `tool_name` ã¨ `arguments` ã‚’ Gateway API ã« HTTP POST
   3. Gateway ã‹ã‚‰ã® JSON ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’ãã®ã¾ã¾ Realtime ã« `tool_result` ã¨ã—ã¦é€ã‚Šè¿”ã™
   4. LLM ãŒãã‚Œã‚’ä½¿ã£ã¦æ¬¡ã®ç™ºè©±ã‚’ç”Ÿæˆ

iOS å´ã§ã¯

1. `ToolInvocation` ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’åˆ‡ã£ã¦ã€
   `get_context_snapshot`, `choose_nudge`, `log_nudge`, `get_behavior_summary` ãªã©ã‚’ä¸€å…ƒç®¡ç†
2. ã™ã¹ã¦ URLSession ã§ `https://api.anicca.app/tools/<tool_name>` ã« POST é ­å‡ºã—
3. ã‚¨ãƒ©ãƒ¼æ™‚ã¯ Realtime ã«ã€Œä¸€æ™‚çš„ãªã‚¨ãƒ©ãƒ¼ãªã®ã§åˆ¥ã®è©±é¡Œã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã€ã¨è¿”ã™ã‚ˆã†ã«ã™ã‚‹

### 2.2 Behavior/Profile ã‚¿ãƒ–

Talk ã¨ã¯ç‹¬ç«‹ã—ã¦ã€REST API çµŒç”±ã§ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚’å©ãã€‚

1. `GET /behavior/summary/today`
   ä»Šæ—¥ã®ç¡çœ ãƒ»æ­©æ•°ãƒ»ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚¿ã‚¤ãƒ ãƒ»ä»Šæ—¥ã®ä¸€è¨€ã‚µãƒãƒª

2. `GET /behavior/trends`
   èµ·åºŠ/å°±å¯ãƒ»SNS æ™‚é–“ãƒ»æ­©æ•°ã® 7 æ—¥/30 æ—¥ãƒˆãƒ¬ãƒ³ãƒ‰

3. `GET /behavior/future`
   æ˜æ—¥ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã€1ãƒ»5ãƒ»10 å¹´å¾Œã®ã‚·ãƒŠãƒªã‚ª

4. `POST /behavior/profile/edit`
   Big Five / ç†æƒ³ã®å§¿ / Struggle ä¿®æ­£ã‚’é€ä¿¡

UI å´ã¯ã“ã® API ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã ã‘ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã™ã‚‹ã€‚
ä¸­èº«ã®ãƒ­ã‚¸ãƒƒã‚¯ã¯ã™ã¹ã¦ Python å´ã€‚

---

## 3. Gateway / Tools APIï¼ˆFastAPIï¼‰

è¨€èªãƒ»ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

1. Python 3.11
2. FastAPI + Uvicorn
3. Poetry ã§ä¾å­˜ç®¡ç†
4. Docker ã‚³ãƒ³ãƒ†ãƒŠåŒ–

ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆæ§‹æˆï¼ˆRealtime tool å‘¼ã³å‡ºã—ã«å¯¾å¿œï¼‰

1. `POST /tools/get_context_snapshot`
   å…¥åŠ›
   ãƒ»user_id
   ãƒ»ç¾åœ¨æ™‚åˆ»ãƒ»OS æƒ…å ±ï¼ˆã‚ã‚Œã°ï¼‰
   å‡¦ç†
   ãƒ»Memory Service, Moss, Metrics Service ã«å•ã„åˆã‚ã›ã¦ã€Œä»Šã“ã®äººã«é–¢ä¿‚ã™ã‚‹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã€ã‚’ JSON ã§è¿”ã™

2. `POST /tools/choose_nudge`
   å…¥åŠ›
   ãƒ»user_id
   ãƒ»target_behaviorï¼ˆsleep / sns / exercise / mindfulness / honestyï¼‰
   ãƒ»context_snapshot
   å‡¦ç†
   ãƒ»Nudge Policy Service ã«æ¸¡ã—ã¦ã€`template_id`, `tone`, `channel`, `priority` ã‚’è¿”ã™

3. `POST /tools/log_nudge`
   å…¥åŠ›
   ãƒ»user_id
   ãƒ»nudge_action
   ãƒ»context_snapshot
   å‡¦ç†
   ãƒ»ãƒ­ã‚®ãƒ³ã‚°ï¼ˆDB å´ï¼‰ã¯åˆ¥ã‚µãƒ¼ãƒ“ã‚¹ã«æŠ•ã’ã‚‹ã ã‘
   ãƒ»è¿”ã‚Šå€¤ã¯ ack

4. `POST /tools/get_behavior_summary`
   å…¥åŠ›
   ãƒ»user_id
   å‡¦ç†
   ãƒ»Simulation Service + Metrics ã‹ã‚‰ Behavior ã‚¿ãƒ–ç”¨ã® JSON ã‚’è¿”ã™

5. `POST /tools/get_future_projection`
   å…¥åŠ›
   ãƒ»user_id
   ãƒ»horizonï¼ˆ"tomorrow" / "1y" / "5y" / "10y"ï¼‰
   å‡¦ç†
   ãƒ»Simulation Service ã§ç”Ÿæˆã—ãŸãƒ†ã‚­ã‚¹ãƒˆãƒ»ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã‚’è¿”ã™

FastAPI å´ã§ã¯ `@router.post("/tools/get_context_snapshot")` ã®ã‚ˆã†ã«å®Ÿè£…ã—ã€
ãã‚Œãã‚Œå°‚ç”¨ã® service ã‚¯ãƒ©ã‚¹ã«ä¾å­˜æ³¨å…¥ã™ã‚‹ã€‚

Langfuse ã«ã¯ FastAPI ã® middleware ã§ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’é€ä¿¡ã™ã‚‹ã€‚([Langfuse][5])

---

## 4. Memory Serviceï¼ˆmem0ï¼‰ã¨ Moss ã®å®Ÿè£…

### 4.1 mem0 ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— ([GitHub][1])

1. mem0 ã‚µãƒ¼ãƒã®ãƒ‡ãƒ—ãƒ­ã‚¤

   1. GitHub ã® `mem0ai/mem0` ã‚’ Docker ã§èµ·å‹•
   2. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‹ã‚‰ HTTP/REST ã‹ Python SDK ã§ã‚¢ã‚¯ã‚»ã‚¹

2. Python ã‚µã‚¤ãƒ‰ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

   1. `pip install mem0`
   2. FastAPI ã‚¢ãƒ—ãƒªã§ `Mem0Client` ã‚’ã‚·ãƒ³ã‚°ãƒ«ãƒˆãƒ³ã¨ã—ã¦ DI

3. ãƒ¡ãƒ¢ãƒªã®ã‚«ãƒ†ã‚´ãƒªè¨­è¨ˆ

   1. `"profile"`
      ç†æƒ³ã®å§¿ãƒ»Struggleãƒ»Big Fiveãƒ»ä¾¡å€¤è¦³
   2. `"behavior_summary"`
      æ—¥æ¬¡ãƒ»é€±æ¬¡ã®è¡Œå‹•è¦ç´„ï¼ˆç¡çœ ãƒ»æ­©æ•°ãƒ»SNS æ™‚é–“ãªã©ï¼‰
   3. `"interaction"`
      é‡è¦ãªä¼šè©±ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç™ºè¨€ãƒ»Nudge ã¸ã®ä¸»è¦³ã‚³ãƒ¡ãƒ³ãƒˆ
   4. `"nudge_meta"`
      ã©ã® Nudge ãŒåŠ¹ãã‚„ã™ã„ã‹ã€å‚¾å‘ã®ãƒ¡ãƒ¢

4. API çš„ãªé–¢æ•°

   1. `save_profile_memory(user_id, payload)`
      mem0 ã« `"profile"` ã‚¿ã‚¤ãƒ—ã¨ã—ã¦ upsert

   2. `save_daily_behavior_summary(user_id, summary_text, stats)`
      `"behavior_summary"` ã«ä¿å­˜

   3. `save_interaction_memory(user_id, transcript_snippet)`

   4. `search_memories(user_id, query, types)`
      Realtime ã‹ã‚‰ã® tool `get_context_snapshot` å†…ã§ä½¿ç”¨

### 4.2 mem0 ã®ã¿ã§ã® Memory & Search è¨­è¨ˆï¼ˆMoss ãªã—ï¼‰

#### ãªãœ Moss ã‚’ v0.3 ã«å…¥ã‚Œãªã„ã‹

1. **ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã®è¦³ç‚¹ã§ç„¡æ„å‘³**
   - mem0 ã®æ¤œç´¢ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ï¼ˆ50-200msï¼‰ã¯ LLM å¿œç­”æ™‚é–“ï¼ˆ2-5ç§’ï¼‰ã¨æ¯”è¼ƒã—ã¦èª¤å·®ãƒ¬ãƒ™ãƒ«
   - Moss ã® sub-10ms ã«ã™ã‚‹æ„å‘³ãŒãªã„

2. **ãƒ‡ãƒ¼ã‚¿åŒæœŸã®è¤‡é›‘æ€§**
   - Moss ã‚’å…¥ã‚Œã‚‹ã¨ã€mem0 ã¨ Moss ä¸¡æ–¹ã«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’åŒæœŸã™ã‚‹å¿…è¦ãŒã‚ã‚‹
   - æ•´åˆæ€§ç®¡ç†ãŒé¢å€’ã«ãªã‚Šã€ãƒã‚°ã®æ¸©åºŠã«ãªã‚‹

3. **iOS ãƒã‚¤ãƒ†ã‚£ãƒ– SDK ãŒãªã„**
   - Moss ã¯ä¸»ã« Web/ãƒ–ãƒ©ã‚¦ã‚¶å‘ã‘ï¼ˆJavaScript SDKï¼‰
   - iOS ã‹ã‚‰ä½¿ã†å ´åˆã€çµå±€ã‚µãƒ¼ãƒãƒ¼å´ã§å‘¼ã¶ã“ã¨ã«ãªã‚Šã€mem0 ã¨å¤‰ã‚ã‚‰ãªã„

4. **v0.3 ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼è¦æ¨¡**
   - åˆæœŸãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°ã¯é™å®šçš„
   - 1 ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚ãŸã‚Šã®ãƒ¡ãƒ¢ãƒªé‡ã¯æ•°ç™¾ã€œæ•°åƒä»¶
   - mem0 ã®ãƒ™ã‚¯ãƒˆãƒ«ã‚¹ãƒˆã‚¢æ¤œç´¢ã§ååˆ†å¯¾å¿œå¯èƒ½

#### mem0 v2 Search API ã®æ©Ÿèƒ½

mem0 ã®æ¤œç´¢ã¯ååˆ†å¼·åŠ›ï¼š

* **è«–ç†æ¼”ç®—å­**: `AND`, `OR`, `NOT`
* **æ¯”è¼ƒæ¼”ç®—å­**: `in`, `gte`, `lte`, `gt`, `lt`, `ne`, `icontains`, `contains`
* **rerank**: æ¤œç´¢çµæœã®å†ãƒ©ãƒ³ã‚­ãƒ³ã‚°
* **keyword_search**: ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹æ¤œç´¢ã®ä½µç”¨

#### ä¿å­˜æ™‚ã® metadata è¨­è¨ˆ

```typescript
// profile
metadata = { category: "profile" }

// behavior_summary
metadata = { category: "behavior_summary", date: "2025-12-06" }

// interaction
metadata = {
  category: "interaction",
  feelings: ["self_loathing"],
  domain: "sleep",
  timestamp: "2025-12-06T21:00:00Z"
}

// nudge_meta
metadata = {
  category: "nudge_meta",
  templateId: 4,
  sentiment: "better"
}
```

#### æ¤œç´¢ä¾‹

```typescript
// æœ€è¿‘ã®è‡ªå·±å«Œæ‚ªé–¢é€£ã®ã‚¨ãƒ”ã‚½ãƒ¼ãƒ‰ã‚’å–å¾—
const results = await memory.search("è‡ªå·±å«Œæ‚ª OR self-loathing", {
  userId: user_id,
  filters: {
    AND: [
      { category: "interaction" },
      { feelings: { in: ["self_loathing"] } }
    ]
  },
  top_k: 3
});

// ã€Œæœ€å¾Œã«å¤œæ›´ã‹ã—ã‚’å¾Œæ‚”ã—ã¦ã„ãŸæ™‚ã€ã®ãƒ¡ãƒ¢ãƒª
const results = await memory.search("å¤œæ›´ã‹ã— å¾Œæ‚”", {
  userId: user_id,
  filters: { category: "interaction", domain: "sleep" },
  top_k: 1
});
```

#### Moss ã‚’æ¤œè¨ã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ï¼ˆv0.4 ä»¥é™ï¼‰

1. ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ 1 ä¸‡äººä»¥ä¸Š
2. 1 ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚ãŸã‚Š 1 ä¸‡ä»¶ä»¥ä¸Šã®ãƒ¡ãƒ¢ãƒª
3. ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ¤œç´¢ãŒå·®åˆ¥åŒ–è¦å› ã«ãªã‚‹
4. ãƒ‡ãƒã‚¤ã‚¹ä¸Š RAG ãŒå¿…è¦ã«ãªã‚‹
äº†è§£ã€‚ã˜ã‚ƒã‚ä¸€å›ã€**Anicca v0.3 å…¨ä½“ã® TECH è¦ä»¶å®šç¾©æ›¸**ã¨ã—ã¦ã¾ã¨ã‚åˆ‡ã‚‹ã­ã€‚
ï¼ˆ7/8 ï¼ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ“ãƒªãƒ†ã‚£ / è‡ªå‹•ãƒ†ã‚¹ãƒˆã¯ã€Œv0.4 ã§ã‚„ã‚‹ã®ã§ v0.3 ã§ã¯ç¯„å›²å¤–ã€ã¨æ˜ç¤ºã—ã¦ãŠãï¼‰

ãã®ã¾ã¾ `tech-v0.3.md` ã«ã‚³ãƒ”ãƒšã§ãã‚‹å½¢ã§æ›¸ãã¾ã™ã€‚

---

# Anicca v0.3 Tech è¦ä»¶å®šç¾©æ›¸ï¼ˆPersuasion Agentï¼‰

ãƒªãƒã‚¸ãƒˆãƒª: `github.com/Daisuke134/anicca.ai` ([GitHub][1])
å¯¾è±¡ãƒ•ã‚©ãƒ«ãƒ€:

* iOS ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ: `aniccaios/`
* ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ API: `apps/api/`ï¼ˆExpress + TypeScriptï¼‰

---

## 0. ã‚´ãƒ¼ãƒ« & ã‚¹ã‚³ãƒ¼ãƒ—

### 0.1 v0.3 ã®ã‚´ãƒ¼ãƒ«

1. **Talk ã‚¿ãƒ–ä¸­å¿ƒã®ã€Œæ„Ÿæƒ…ãƒ»è‹¦ã—ã¿ã‚µãƒãƒ¼ãƒˆã€**

   * ç”»é¢ã‚’é–‹ãã¨ã€ãã®äººã®ã€Œä»Šã®è‹¦ã—ã¿ã€ã«è¿‘ã„ 3 ã¤ã®ãƒœã‚¿ãƒ³ï¼ˆFeeling ãƒœã‚¿ãƒ³ï¼‰ãŒå‡ºã‚‹ã€‚
   * ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã ã‘ã§ Anicca ãŒå…ˆã«è©±ã—ã‹ã‘ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãŸã ç­”ãˆã‚Œã°ã‚ˆã„ã€‚
   * ä¼šè©±ãƒ»ãƒ­ã‚°ã‹ã‚‰å­¦ç¿’ã—ã€ãã®äººã«åˆã£ãŸå£°ã‹ã‘ã«å¾ã€…ã«å¤‰åŒ–ã—ã¦ã„ãã€‚

2. **è¡Œå‹•ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®æ§‹ç¯‰ + JITAI å‹ Nudge**

   * iOS ã® Screen Time / HealthKit / Motion / ä½ç½®æƒ…å ±ã‚’ä½¿ã„ã€
     ã€Œå¤œæ›´ã‹ã—ã€ã€Œæœã®ã‚¹ãƒãƒ›ä¾å­˜ã€ã€ŒSNS é•·æ™‚é–“ã€ã€Œåº§ã‚Šã£ã±ãªã—ã€ãªã©ã‚’æ¤œçŸ¥ã€‚
   * Just-in-Time Adaptive Interventionï¼ˆJITAIï¼‰ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã«æ²¿ã„ã€
     æ±ºã¾ã£ãŸæ™‚é–“ã§ã¯ãªãã€Œãã®ç¬é–“ã€ã«æœ€é©ãª Nudge ã‚’é€ã‚‹ã€‚([Frontiers][2])
   * æˆåŠŸ / å¤±æ•—ã®ãƒ­ã‚°ã‹ã‚‰å°‘ã—ãšã¤ Nudge ã®ãƒˆãƒ¼ãƒ³ãƒ»ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã™ã‚‹ã€‚

3. **Behavior ã‚¿ãƒ–ã«ã‚ˆã‚‹ã€Œç¾åœ¨ã¨æœªæ¥ã®å¯è¦–åŒ–ã€**

   * ä»Šæ—¥ã®ä¸€è¨€ã‚µãƒãƒªï¼ˆä¾‹:ã€Œä»Šæ—¥ã¯è‡ªå·±å«Œæ‚ªãŒå¼·ã‹ã£ãŸãŒã€å¤œã«å°‘ã—è»½ãã§ããŸã€ï¼‰ã€‚
   * ä»Šæ—¥ã“ã‚Œã‹ã‚‰ã® 1 æ—¥ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæ®‹ã‚Šæ™‚é–“ãƒ–ãƒ­ãƒƒã‚¯ã®ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼‰ã€‚
   * 1 / 5 / 10 å¹´å¾Œã€ã€Œä»Šã®è¡Œå‹•ãŒç¶šã„ãŸå ´åˆã€ã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’ãƒ†ã‚­ã‚¹ãƒˆã§è¡¨ç¤ºã€‚
   * ã“ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ Nudge ãƒãƒªã‚·ãƒ¼ã®å†…éƒ¨ã§ã‚‚ä½¿ã†ï¼ˆä»‹å…¥ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®æ ¹æ‹ ï¼‰ã€‚

4. **è¨˜æ†¶ãƒ¬ã‚¤ãƒ¤ãƒ¼**

   * mem0 ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã€Œç†æƒ³ã€ã€Œè‹¦ã—ã¿ã€ã€Œå¤§äº‹ãªç™ºè¨€ã€ã€Œè¡Œå‹•ã®è¦ç´„ã€ã‚’æ°¸ç¶šåŒ–ã€‚([docs.mem0.ai][3])
   * v0.3 ã§ã¯ mem0 ã®ã¿ã‚’ä½¿ç”¨ï¼ˆMoss/Exa ã¯ v0.4 ä»¥é™ã§æ¤œè¨ï¼‰ã€‚

### 0.2 v0.3 ã«å«ã‚ã‚‹æ©Ÿèƒ½

* Talk ã‚¿ãƒ–

  * Realtime éŸ³å£°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆOpenAI Realtime APIï¼‰
  * ã€ŒHow are you feeling?ã€+ 3 ã¤ã® Feeling ãƒœã‚¿ãƒ³ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã«å‹•çš„ï¼‰
  * Anicca Quotesï¼ˆWisdom Corpus ã‹ã‚‰ 1 ã¤è¡¨ç¤ºï¼‰
  * ä¼šè©±ã‹ã‚‰ã®é‡è¦ãªãƒ¡ãƒ¢ãƒªä¿å­˜ï¼ˆmem0ï¼‰
* è‡ªå‹• Nudge

  * Sleep / Morning Phone / SNS / Sedentary / Activity / Mindfulness ãªã©ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã§ JITAI é¢¨ Nudge
  * èµ·åºŠãƒ»å°±å¯ãƒ‘ã‚¿ãƒ¼ãƒ³ã®è‡ªå‹•æ¤œçŸ¥ï¼ˆHealthKit + DeviceActivityï¼‰
  * SNS / Video é•·æ™‚é–“åˆ©ç”¨ã®æ¤œçŸ¥ï¼ˆDeviceActivity / FamilyControlsï¼‰([Apple Developer][4])
  * åº§ã‚Šã£ã±ãªã—æ™‚é–“ã®æ¤œçŸ¥ï¼ˆCoreMotionï¼‰
  * Nudge ã®æˆåŠŸ / å¤±æ•—ãƒ­ã‚®ãƒ³ã‚° + ç°¡æ˜“ãªè‡ªå¾‹æ”¹å–„ãƒ­ã‚¸ãƒƒã‚¯
* Behavior ã‚¿ãƒ–

  * ä»Šæ—¥ã®ä¸€è¨€ã‚µãƒãƒª
  * ä»Šæ—¥æ®‹ã‚Šã® 1 æ—¥ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼‰
  * 1 / 5 / 10 å¹´å¾Œã®æœªæ¥ã‚·ãƒŠãƒªã‚ªï¼ˆã€Œä»Šã®è¡Œå‹•ãŒç¶šã„ãŸå ´åˆã€ã ã‘ã‚’è¡¨ç¤ºï¼‰
  * BIG5 / ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼åˆ†æï¼ˆLLM ã«ã‚ˆã‚‹ãƒ†ã‚­ã‚¹ãƒˆè¦ç´„ï¼‰
* è¨˜æ†¶

  * mem0 Node SDK ã«ã‚ˆã‚‹ãƒ¡ãƒ¢ãƒªä¿å­˜ / æ¤œç´¢([docs.mem0.ai][5])
  * v0.3 ã§ã¯ mem0 ã®ã¿ä½¿ç”¨ï¼ˆMoss/Exa ã¯ v0.4 ä»¥é™ï¼‰

### 0.3 v0.3 ã®éã‚¹ã‚³ãƒ¼ãƒ—ï¼ˆv0.4 ã§å®Ÿè£…ï¼‰

* 7. Observability / Evalï¼ˆLangfuse, TruLens ç­‰ã§ã® LLM è©•ä¾¡ãƒ»ãƒˆãƒ¬ãƒ¼ã‚¹ï¼‰
* 8. ãƒ†ã‚¹ãƒˆè‡ªå‹•åŒ–ï¼ˆMaestroã€Mobile MCP ã§ã®è‡ªå‹• UI ãƒ†ã‚¹ãƒˆï¼‰

  * v0.3 ã§ã¯æœ€å°é™ã®ãƒ­ã‚°å‡ºåŠ›ãƒ»æ‰‹å‹•ãƒ†ã‚¹ãƒˆã®ã¿ã€‚
  * è¨­è¨ˆæ›¸å†…ã§ã¯ã€Œå°†æ¥ã“ã“ã«ç¹‹ãã€ã¨ã„ã†å‰æã ã‘æ›¸ãã€è©³ç´°ã¯æ›¸ã‹ãªã„ã€‚

---

## 1. ãƒªãƒã‚¸ãƒˆãƒªæ§‹æˆ & ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### 1.1 æ—¢å­˜æ§‹æˆï¼ˆç¾çŠ¶ï¼‰

`README.md` ã‚ˆã‚Š:([GitHub][1])

* `aniccaios/`

  * iOS ã‚¢ãƒ—ãƒªï¼ˆSwiftUIï¼‰
  * ç¾çŠ¶: Talk / Habits ãªã©ã®ã‚¿ãƒ–ãŒå­˜åœ¨ã€‚OpenAI Realtime API ã¨ WebRTC ã§æ¥ç¶šã€‚

* `apps/api/`

  * Node.js / Express ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
  * TypeScript ã§å®Ÿè£…
  * Railway / Fly.io ä¸Šã«ãƒ‡ãƒ—ãƒ­ã‚¤

### 1.2 v0.3 ã®è«–ç†ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ï¼ˆiOSï¼‰

* **Onboarding ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**

  * Apple Sign In
  * ç†æƒ³ã®è‡ªåˆ† / Struggle ã®é¸æŠï¼ˆè¤‡æ•°ï¼‰
  * è¨±å¯ç”»é¢ï¼ˆScreen Time / HealthKit / Motion / ä½ç½®æƒ…å ±ï¼‰

* **Talk ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**

  * ãƒ¡ã‚¤ãƒ³ã®éŸ³å£°ã‚»ãƒƒã‚·ãƒ§ãƒ³ UIï¼ˆTalk ã‚¿ãƒ–ï¼‰
  * Feeling ãƒœã‚¿ãƒ³ï¼ˆ3 ã¤ï¼‰
  * Anicca Quote è¡¨ç¤º

* **Behavior ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**

  * ã€Œä»Šæ—¥ã€ã®ã‚µãƒãƒª + ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ + æœªæ¥ã‚·ãƒŠãƒªã‚ª + ç‰¹æ€§è¡¨ç¤º

* **Sensors / Permissions ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**

  * DeviceActivity / FamilyControls
  * HealthKit
  * CoreMotion
  * Location

* **Notifications ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«**

  * Push é€šçŸ¥ / ãƒ­ãƒ¼ã‚«ãƒ«é€šçŸ¥
  * AlarmKitï¼ˆiOS 18 ä»¥é™ã§ä½¿ç”¨å¯èƒ½ã§ã‚ã‚Œã°èµ·åºŠ Nudge ç”¨ã«æ¤œè¨ï¼‰

#### ã‚µãƒ¼ãƒå´ï¼ˆapps/apiï¼‰

Express ã‚¢ãƒ—ãƒªå†…ã‚’ä»¥ä¸‹ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«åˆ†å‰²ã—ã¦æ•´ç†ã™ã‚‹ï¼ˆæ–°è¦ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’è¿½åŠ ã—ã¦ã‚ˆã„ï¼‰:

* `modules/realtime-tools/`

  * OpenAI Realtime ç”¨ tool ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆï¼ˆHTTPï¼‰
  * `get_context_snapshot`, `choose_nudge`, `log_nudge`, `get_behavior_summary` ãªã©

* `modules/memory/`

  * mem0 ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼ˆNode SDKï¼‰
  * ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« / è¡Œå‹•ã‚µãƒãƒª / å¯¾è©±ãƒ¡ãƒ¢ãƒªã®èª­ã¿æ›¸ã

* `modules/nudge/`

  * Nudge ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³
  * Nudge ãƒãƒªã‚·ãƒ¼ï¼ˆç°¡æ˜“ contextual bandit + ãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ã‚¯ï¼‰
  * æˆåŠŸ / å¤±æ•—åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯

* `modules/simulation/`

  * OpenAI Chat API ã‚’ä½¿ã£ãŸã€Œä»Šæ—¥æ®‹ã‚Šã® 1 æ—¥ã€ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
  * 1 / 5 / 10 å¹´å¾Œã®ã‚·ãƒŠãƒªã‚ªç”Ÿæˆ

* `modules/metrics/`

  * iOS ã‹ã‚‰é€ã‚‰ã‚ŒãŸ Screen Time / Sleep / æ­©æ•° / Activity ç­‰ã‚’é›†ç´„
  * Behavior ã‚µãƒãƒªç”Ÿæˆã«å¿…è¦ãªçµ±è¨ˆå€¤ã‚’è¨ˆç®—

---

## 2. iOS ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¦ä»¶

### 2.1 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

* è¨€èª: Swift 5.x
* UI: SwiftUI
* éŸ³å£°ã‚¹ãƒˆãƒªãƒ¼ãƒ : AVAudioEngine
* Realtime æ¥ç¶š: WebRTCï¼ˆæ—¢å­˜å®Ÿè£…ã‚’ç¶™ç¶šï¼‰
* ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯:

  * `DeviceActivity` + `FamilyControls`ï¼ˆScreen Time / ã‚¢ãƒ—ãƒªä½¿ç”¨é‡ï¼‰([Apple Developer][4])
  * `HealthKit`ï¼ˆç¡çœ ãƒ»æ­©æ•°ãªã©ï¼‰
  * `CoreMotion`ï¼ˆæ­©è¡Œ / èµ°è¡Œ / é™æ­¢ï¼‰
  * `CoreLocation`ï¼ˆä½ç½®æƒ…å ±ï¼‰

### 2.2 ä¸»è¦ç”»é¢

#### 2.2.1 Talk ã‚¿ãƒ–

**ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆæ¦‚ç•¥ï¼‰**

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  11:09                         â— ğŸ”‹  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  How are you feeling now?              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Quoteã‚«ãƒ¼ãƒ‰ï¼ˆä»Šæ—¥ã®ä¸€è¨€ï¼‰               â”‚
â”‚  ï¼ˆå›ºå®šã‚¹ãƒˆãƒƒã‚¯30å€‹ã‹ã‚‰1æ—¥1ã¤è¡¨ç¤ºï¼‰       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ ğŸ”¶ è‡ªå·±å«Œæ‚ª ]                       â”‚
â”‚  [ ğŸ”¶ ä¸å®‰ ]                          â”‚
â”‚  [ ğŸ”¶ æ€’ã‚Š ]                          â”‚
â”‚  [ ğŸ’¬ Something else ]                â”‚
â”‚   ï¼ˆä¸Š3ã¤ã¯å‹•çš„ã€4ã¤ç›®ã¯å›ºå®šï¼‰           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Talk   |   Behavior   |   Profile   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è¦ä»¶**

* Feeling ãƒœã‚¿ãƒ³ï¼ˆ4ã¤ã®ã‚«ãƒ¼ãƒ‰ã€ç¸¦ä¸¦ã³ï¼‰:

  * ä¸Š3ã¤: mem0 ã® Trait/Struggle ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ« + æœ€è¿‘ã®æ„Ÿæƒ…ãƒ¡ãƒ¢ãƒªã‹ã‚‰å‹•çš„ã«é¸ã¶ã€‚
    * åˆæœŸã¯ Onboarding ã§é¸ã‚“ã  Struggle ã‹ã‚‰æœ€å¤§ 3 ã¤ã€‚
  * 4ã¤ç›®: å›ºå®šã€ŒSomething elseã€ï¼ˆä¸Šã®3ã¤ã«å½“ã¦ã¯ã¾ã‚‰ãªã„å ´åˆã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰ã€‚
  * ã‚¿ãƒƒãƒ—æ™‚:

    * OpenAI Realtime ã«ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ä»Š â—‹â—‹ ã‚’æ„Ÿã˜ã¦ã„ã‚‹ã€ã¨ã„ã†ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’é€ã‚‹ã€‚
    * Anicca ãŒã€Œå…ˆã«ã€è©±ã—å§‹ã‚ã‚‹ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç™ºè©±ã‚’å¾…ãŸãªã„ï¼‰ã€‚

* ã‚«ãƒ¼ãƒ‰ã‚¿ãƒƒãƒ— â†’ Sessionç”»é¢é·ç§»:

  * Feelingã‚«ãƒ¼ãƒ‰ï¼ˆ4ã¤ã®ã„ãšã‚Œã‹ï¼‰ã‚’ã‚¿ãƒƒãƒ— â†’ Sessionç”»é¢ã¸ push é·ç§»ã€‚
  * Sessionç”»é¢ã¯éŸ³å£°ã‚»ãƒƒã‚·ãƒ§ãƒ³å°‚ç”¨ã®ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã€‚
  * é·ç§»æ™‚ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿: `topic`ï¼ˆself_loathing / anxiety / irritation / free_conversationï¼‰
  * Sessionç”»é¢ã§ OpenAI Realtime ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹ã€‚
  * ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹æ™‚ã€Tool ã§ `get_context_snapshot` ã‚’å‘¼ã¶ã€‚
  * AVAudioEngine ã§éŸ³å£°ã‚’ã‚¹ãƒˆãƒªãƒ¼ãƒ ã—ã€LLM ã®éŸ³å£°ã‚’å†ç”Ÿã€‚

* ä¼šè©±ãƒ­ã‚°:

  * UI ä¸Šã«ã¯ãƒãƒ£ãƒƒãƒˆãƒ­ã‚°ã‚’æ®‹ã•ãªã„ã€‚
  * ãŸã ã—ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«ã¯ãƒ†ã‚­ã‚¹ãƒˆãƒˆãƒ©ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆè¦ç´„ï¼‰ã‚’ãƒ¡ãƒ¢ãƒªã¨ã—ã¦é€ã‚‹ã€‚

#### 2.2.2 Behavior ã‚¿ãƒ–

**ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆæ¦‚ç•¥ï¼‰**

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Today's Insights                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä»Šæ—¥ã®ä¸€è¨€ã‚µãƒãƒª                              â”‚
â”‚  ã€ŒYour sleep was short today. Phone usage    â”‚
â”‚   increased in the afternoon.ã€              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  24-Hour Timeline                             â”‚
â”‚   [â– â– â– ç¡çœ â– â– â– ][â– â– é›†ä¸­â– â– ][â– ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«â– ][æ´»å‹•]   â”‚
â”‚   12am    6am    12pm    6pm    12am         â”‚
â”‚   å‡¡ä¾‹: Sleep(é’) Focus(æ©™) Scroll(èµ¤) Activity(ç·‘) â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Today's Highlights                           â”‚
â”‚   [Wake âœ“ğŸŒ±5]      [Screen â†’ğŸŒ±3]             â”‚
â”‚   Moving Forward    Stable                   â”‚
â”‚   [Workout âš ğŸŒ±1]   [Rumination âœ“ğŸŒ±2]         â”‚
â”‚   Needs Attention   Moving Forward           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  10 Years From Now                           â”‚
â”‚   ãƒ†ã‚­ã‚¹ãƒˆæ•°è¡Œï¼ˆä»Šã®è¡Œå‹•ãŒç¶šã„ãŸå ´åˆã®æœªæ¥ï¼‰    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Talk   |   Behavior   |   Profile           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**API å‘¼ã³å‡ºã—**

* `GET /behavior/summary/today`

  * ä»Šæ—¥ã®ä¸€è¨€ã‚µãƒãƒª + 24-Hour Timeline ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã€‚
* `GET /behavior/highlights`

  * Today's Highlights ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³ã”ã¨ã®ã‚¹ãƒˆãƒªãƒ¼ã‚¯ + ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼‰ã‚’å–å¾—ã€‚
* `GET /behavior/profile`

  * BIG5 / ã‚­ãƒ£ãƒ©ã‚¯ã‚¿è§£æçµæœã‚’å–å¾—ã€‚ï¼ˆProfileç”»é¢ã§ä½¿ç”¨ï¼‰
* `GET /behavior/future`

  * 10å¹´å¾Œã®ãƒ†ã‚­ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ªã‚’å–å¾—ã€‚

#### 2.2.3 Session ç”»é¢

**ç›®çš„**

* å®Ÿéš›ã®éŸ³å£°ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®çŠ¶æ…‹ã‚’ã€è¦–è¦šçš„ã«åˆ†ã‹ã‚Šã‚„ã™ãè¡¨ç¤ºã—ã€
  ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã„ã¤ã§ã‚‚çµ‚äº†ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

**é·ç§»å…ƒ**

1. Talk ã‚¿ãƒ–ã® Feeling ã‚«ãƒ¼ãƒ‰
   * å„ã‚«ãƒ¼ãƒ‰ã‹ã‚‰ `SessionView` ã« push
   * ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿: `topic`ï¼ˆself_loathing / anxiety / irritation / free_conversationï¼‰
2. Wake ç­‰ã®è‡ªå‹•ä»‹å…¥ï¼ˆAlarmKit / é€šçŸ¥ï¼‰ã‹ã‚‰
   * èµ·åºŠãƒŠãƒƒã‚¸é€šçŸ¥ã‚¿ãƒƒãƒ— â†’ `SessionView(topic: wake)` ãªã©

**ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆæ¦‚ç•¥ï¼‰**

```text
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 11:09                        â— ğŸ”‹ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                   â”‚
â”‚ [ Talking about self-loathing ]   â”‚ â† ä¸Šéƒ¨ã®å°ã•ãªãƒ©ãƒ™ãƒ«ï¼ˆä¸¸è§’pillï¼‰
â”‚                                   â”‚
â”‚         (é’ã„ä¸¸ã‚ªãƒ¼ãƒ–)              â”‚
â”‚                                   â”‚
â”‚      Anicca is listeningâ€¦         â”‚ â† çŠ¶æ…‹ãƒ†ã‚­ã‚¹ãƒˆ
â”‚                                   â”‚
â”‚  [ ğŸ™ ]                     [ âœ• ]  â”‚ â† å·¦: micãƒˆã‚°ãƒ«, å³: red End
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è¦ä»¶**

* é’ã„ä¸¸ã‚ªãƒ¼ãƒ–: å¸¸ã«ç·©ã‚„ã‹ãªbreathã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆscale 0.95ã€œ1.05ï¼‰
  * AVAudioEngine ã® RMS ãƒ¬ãƒ™ãƒ«ã«åˆã‚ã›ã¦ã‚¹ã‚±ãƒ¼ãƒ«ã‚’å¾®èª¿æ•´
* çŠ¶æ…‹ãƒ†ã‚­ã‚¹ãƒˆ: `Anicca is listeningâ€¦` / `Anicca is speakingâ€¦`
  * Realtime API ã®çŠ¶æ…‹ã«åˆã‚ã›ã¦æ›´æ–°
* å³ä¸‹ã®èµ¤ã„ä¸¸ãƒœã‚¿ãƒ³ï¼ˆâœ•ï¼‰: ã„ã¤ã§ã‚‚ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’çµ‚äº†ã§ãã‚‹

**æŒ™å‹•**

* ç”»é¢è¡¨ç¤ºæ™‚ã« Realtime ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’é–‹å§‹
* End ãƒœã‚¿ãƒ³ or ãƒŠãƒ“ãƒãƒ¼ Back ã‚¿ãƒƒãƒ—:
  * Realtime æ¥ç¶šã‚’åœæ­¢
  * `SessionView` ã‚’é–‰ã˜ã¦ Talk ã‚¿ãƒ–ã¸æˆ»ã‚‹

---

### 2.3 ãƒ‡ãƒ¼ã‚¿å–å¾— & ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

* DeviceActivity / FamilyControls

  * äº‹å‰ã« FamilyControls entitlement ã‚’ç”³è«‹ã€‚
  * SNS / Video ã‚«ãƒ†ã‚´ãƒªã®ä½¿ç”¨æ™‚é–“é–¾å€¤ï¼ˆä¾‹: 30 åˆ†ï¼‰ã‚’è¨­å®šã—ã€è¶…éæ™‚ã« delegate ã§é€šçŸ¥ã€‚([Medium][8])
  * 1 æ—¥å˜ä½ã®é›†è¨ˆæƒ…å ±ï¼ˆã‚«ãƒ†ã‚´ãƒªåˆ¥ä½¿ç”¨æ™‚é–“ï¼‰ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ã¾ã¨ã‚ã€1 æ—¥ 1 å›ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«é€ä¿¡ã€‚

* HealthKit

  * ç¡çœ ï¼ˆ`HKCategoryTypeIdentifierSleepAnalysis`ï¼‰
  * æ­©æ•°ï¼ˆ`HKQuantityTypeIdentifierStepCount`ï¼‰
  * æ¯æœ / æ¯å¤œã«å‰æ—¥åˆ†ã‚’ã¾ã¨ã‚ã¦ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã€‚

* CoreMotion

  * é•·æ™‚é–“é™æ­¢ï¼ˆ2 æ™‚é–“ä»¥ä¸Šåº§ã‚Šã£ã±ãªã—ï¼‰ã‚’æ¤œçŸ¥ã€‚
  * ã—ãã„å€¤è¶…éæ™‚ã« Nudge ãƒˆãƒªã‚¬ã‚’ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã«é€ä¿¡ã€‚

æ³¨ï¼šLocationï¼ˆä½ç½®æƒ…å ±ï¼‰ã¯v3ã§ã¯ä½¿ç”¨ã—ãªã„ã€‚

---

## 3. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ APIï¼ˆapps/apiï¼‰è¦ä»¶

### 3.1 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

* Node.js 20+
* TypeScript
* Express
* å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹:

  * OpenAI Realtime / Chat API
  * mem0 Node SDK([docs.mem0.ai][5])
* ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆã‚¢:

  * æ—¢å­˜ã® DBï¼ˆSupabase / Prisma ç­‰ï¼‰ã‚’ç¶™ç¶šåˆ©ç”¨ï¼ˆè©³ç´°ã‚¹ã‚­ãƒ¼ãƒã¯åˆ¥é€”ï¼‰ã€‚

### 3.2 ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä¸€è¦§ï¼ˆv0.3ï¼‰

#### 3.2.1 Talk ã¾ã‚ã‚Š

* `POST /realtime/tools/get_context_snapshot`

  * Input: `{ userId, domain }`

    * `domain`: `"sleep" | "sns" | "mindfulness" | "general" ...`
  * å‡¦ç†:

    * mem0 ã‹ã‚‰æœ€è¿‘ã® profile / interaction / behavior_summary ã‚’æ¤œç´¢ã€‚
    * ç¾åœ¨ã® metricsï¼ˆä»Šæ—¥ã®ç¡çœ ãƒ»SNS æ™‚é–“ãªã©ï¼‰ã‚’ metrics ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰å–å¾—ã€‚
  * Output:

    ```json
    {
      "profile": { ... },
      "recent_memories": [ { "text": "...", "created_at": "..." } ],
      "today_stats": { "sleep_hours": 6.5, "sns_minutes": 120, ... }
    }
    ```

* `POST /realtime/tools/log_interaction`

  * Talk ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ã®è¦ç´„ã‚’ä¿å­˜ã€‚
  * Input: `{ userId, summaryText, tags }`
  * å‡¦ç†: mem0 `"interaction"` ã«ä¿å­˜ã€‚

#### 3.2.2 Nudge ã¾ã‚ã‚Š

* `POST /nudge/trigger`

  * iOS ãŒã€Œã‚¤ãƒ™ãƒ³ãƒˆç™ºç”Ÿã€ã‚’çŸ¥ã‚‰ã›ã‚‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã€‚
  * Input ä¾‹:

    ```json
    {
      "userId": "u123",
      "eventType": "sns_threshold_exceeded",
      "eventPayload": {
        "category": "social",
        "durationMinutes": 35
      },
      "timestamp": "2025-12-06T10:35:00Z"
    }
    ```
  * å‡¦ç†:

    1. `NudgeContextBuilder` ãŒ `context_snapshot` ã‚’çµ„ã¿ç«‹ã¦ã‚‹ã€‚
    2. `NudgePolicy` ã«æ¸¡ã—ã¦ `templateId` / `tone` / `channel` ã‚’æ±ºå®šã€‚
    3. é€šçŸ¥æ–‡è¨€ã‚’ LLM ã§ç”Ÿæˆï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ + ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆï¼‰ã€‚
    4. é€šçŸ¥ã‚­ãƒ¥ãƒ¼ã«ç™»éŒ²ï¼ˆå®Ÿé…ä¿¡ã¯åˆ¥ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼‰ã€‚

* `POST /nudge/feedback`

  * Nudge ã®æˆåŠŸ / å¤±æ•—ã‚’è¨˜éŒ²ã€‚
  * Input ä¾‹:

    ```json
    {
      "userId": "u123",
      "nudgeId": "n_20251206_001",
      "label": "success" | "failed" | "ignored",
      "signals": {
        "notificationOpened": true,
        "snsClosedWithinMinutes": 3,
        "userSaid": "thanks, that helped"
      }
    }
    ```
  * å‡¦ç†:

    * `NudgeLog` ã¨ã—ã¦ DB ã«ä¿å­˜ã€‚
    * mem0 ã® `"nudge_meta"` ã«çŸ­ã„ãƒ†ã‚­ã‚¹ãƒˆã¨ã—ã¦ä¿å­˜ï¼ˆä¾‹:ã€Œå„ªã—ã„ãƒˆãƒ¼ãƒ³ã® SNS ä¼‘æ†©ã¯åŠ¹ãã‚„ã™ã„ã€ï¼‰ã€‚
    * å¾Œè¿°ã®ç°¡æ˜“ãƒãƒ³ãƒ‡ã‚£ãƒƒãƒˆæ›´æ–°ã«ä½¿ãˆã‚‹ã‚ˆã†ã‚­ãƒ¥ãƒ¼ã«ç©ã‚€ã€‚

#### 3.2.3 Behavior / ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

* `GET /behavior/summary/today?userId=...`

  * metrics + mem0 + Nudge ãƒ­ã‚°ã‹ã‚‰ã€Œä»Šæ—¥ã®ä¸€è¨€ã‚µãƒãƒªã€ã¨ã€Œä»Šæ—¥ã®çŠ¶æ…‹ã€ã‚’è¿”ã™ã€‚
* `GET /behavior/future?userId=...`

  * ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ã§ç”Ÿæˆã—ãŸ 10 å¹´å¾Œãƒ†ã‚­ã‚¹ãƒˆã‚’è¿”ã™ã€‚
* `GET /behavior/profile?userId=...`

  * mem0 ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒ¡ãƒ¢ãƒªã‹ã‚‰ BIG5 / ç‰¹æ€§ãªã©ã‚’è¿”ã™ã€‚

#### 3.2.4 Onboarding / Profile

* `POST /profile/init`

  * ç†æƒ³ã®å§¿ãƒ»Struggle ã‚’å—ã‘å–ã‚Š mem0 `"profile"` ã«ä¿å­˜ã€‚
* `POST /profile/update`

  * Profileç”»é¢ã‹ã‚‰ã®ç·¨é›†ã‚’åæ˜ ã€‚
* `GET /profile`

  * ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å…¨ä½“ã‚’å–å¾—ï¼ˆIdealsã€Strugglesã€Nudgeå¼·åº¦ã€Sticky Modeã€Data Integrationè¨­å®šï¼‰ã€‚

**Profileç”»é¢ã®æ§‹æˆï¼š**

* ãƒ¦ãƒ¼ã‚¶ãƒ¼åãƒ»ãƒ—ãƒ©ãƒ³ãƒ»è¨€èªè¨­å®š
* Your Traits: Big Fiveã‚µãƒãƒª + ã€ŒView full trait profileã€ãƒªãƒ³ã‚¯ï¼ˆTraits Detailç”»é¢ã¸ï¼‰
* Ideal Self: é¸æŠã—ãŸIdealsã‚¿ã‚°è¡¨ç¤º
* Current Struggles: é¸æŠã—ãŸStrugglesã‚¿ã‚°è¡¨ç¤º
* Nudge Strength: ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ï¼ˆquiet / normal / activeï¼‰
* Sticky Mode: ãƒˆã‚°ãƒ«
* Data Integration:
  * Steps (HealthKit) - ãƒˆã‚°ãƒ«
  * Sleep (HealthKit) - ãƒˆã‚°ãƒ«
  * Screen Time - ãƒˆã‚°ãƒ«

---

## 4. Memory ãƒ¬ã‚¤ãƒ¤ãƒ¼ (mem0)

### 4.1 mem0ï¼ˆæ„å‘³è¨˜æ†¶ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼‰

æ–‡çŒ®çš„ã«ã‚‚ã€é•·æœŸãƒ»ãƒ‘ãƒ¼ã‚½ãƒŠãƒ«ãªãƒ¡ãƒ¢ãƒªã‚’ LLM ã‹ã‚‰åˆ‡ã‚Šé›¢ã™æ§‹é€ ã¯
é•·æœŸå¯¾è©±ã‚„ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºã«æœ‰åŠ¹ã¨ã•ã‚Œã¦ã„ã‚‹ã€‚([arXiv][9])

**åˆ†é¡**

* `type: "profile"`

  * ç†æƒ³ã®å§¿ï¼ˆã‚¿ã‚° / ãƒ†ã‚­ã‚¹ãƒˆï¼‰
  * Struggleï¼ˆã‚¿ã‚° / ãƒ†ã‚­ã‚¹ãƒˆï¼‰
  * BIG5 æ¨å®š
* `type: "behavior_summary"`

  * æ—¥æ¬¡: ã€Œä»Šæ—¥ã¯ 3 æ™‚é–“ SNS ã‚’è¦‹ã¦å¾Œæ‚”ã—ã¦ã„ãŸã€ãªã©ã®è¦ç´„ + æ•°å€¤ã€‚
* `type: "interaction"`

  * Talk ä¸­ã®é‡è¦ç™ºè¨€ãƒ»æ°—ã¥ããƒ»å¾Œæ‚”ã€‚
* `type: "nudge_meta"`

  * ã€Œâ—‹â—‹ç³»ã® Nudge ã¯åŠ¹ãã‚„ã™ã„ / åŠ¹ãã«ãã„ã€ãªã©ã®ãƒ¡ãƒ¢ã€‚

**æ›¸ãè¾¼ã¿ã‚¿ã‚¤ãƒŸãƒ³ã‚°**

* Onboarding å®Œäº†æ™‚ â†’ `"profile"`
* æ¯æ—¥æ·±å¤œï¼ˆã¾ãŸã¯ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã«å‰æ—¥åˆ†ï¼‰â†’ `"behavior_summary"`
* Talk ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ â†’ `"interaction"`
* Nudge ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ›´æ–°æ™‚ â†’ `"nudge_meta"`

---

## 5. Nudge ãƒãƒªã‚·ãƒ¼ & è‡ªå¾‹æ”¹å–„ï¼ˆv0.3ï¼‰

JITAI ç ”ç©¶ã§ã¯ã€

* ã€Œæ±ºå®šç‚¹ï¼ˆdecision pointï¼‰ã€ã”ã¨ã«
* ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’è¦‹ã¦
* é©åˆ‡ãªä»‹å…¥ / éä»‹å…¥ã‚’é¸ã¶
  ã¨ã„ã†ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãŒæ¨™æº–ã€‚([Frontiers][2])

ã¾ãŸã€ãƒ¢ãƒã‚¤ãƒ«ãƒ˜ãƒ«ã‚¹ã§ã¯ contextual bandits ã§ä»‹å…¥ã‚’é¸æŠã™ã‚‹æ‰‹æ³•ãŒå®Ÿéš›ã«ä½¿ã‚ã‚Œã¦ã„ã‚‹ã€‚([ambujtewari.com][10])

v0.3 ã§ã¯**ã€Œãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ + ç°¡æ˜“ãƒãƒ³ãƒ‡ã‚£ãƒƒãƒˆã€**ã¾ã§ã‚’ã‚¹ã‚³ãƒ¼ãƒ—ã¨ã™ã‚‹ã€‚

### 5.1 å¯¾è±¡ãƒ‰ãƒ¡ã‚¤ãƒ³ï¼ˆv0.3ï¼‰

1. Sleep / å¤œæ›´ã‹ã—
2. Morning Phoneï¼ˆèµ·åºŠç›´å¾Œã®ã‚¹ãƒãƒ›ï¼‰
3. SNS / Video é•·æ™‚é–“
4. Sedentaryï¼ˆåº§ã‚Šã£ã±ãªã—ï¼‰
5. Activity / Exerciseï¼ˆè»½ã„é‹å‹•ãƒ»ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ï¼‰
6. Mindfulnessï¼ˆåèŠ»ãƒ»ã‚¹ãƒˆãƒ¬ã‚¹ãƒ»æ€’ã‚Šï¼‰
7. Priority Habitsï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ˜ç¤ºã—ãŸã€Œå„ªå…ˆç¿’æ…£ã€ï¼‰

   * ç‘æƒ³ / ç­‹ãƒˆãƒ¬ / ãƒ©ãƒ³ãƒ‹ãƒ³ã‚° ãªã©

### 5.2 ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ JITAIï¼ˆãƒ‰ãƒ¡ã‚¤ãƒ³åˆ¥ï¼‰

#### 5.2.1 Sleep

* **çŠ¶æ…‹æŠŠæ¡**

  * éå» 7 æ—¥ã®å¹³å‡å°±å¯ / èµ·åºŠæ™‚åˆ»ï¼ˆHealthKitï¼‰
  * ç¡çœ æ™‚é–“ã®å¹³å‡
* **ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ**

  * å¹³å‡å°±å¯ãŒ 0:30ã€ç¡çœ  6h ç¨‹åº¦ãªã‚‰ã€ã¾ãšã¯ 23:30 ã‚„ 23:45 ã«è¿‘ã¥ã‘ã‚‹ã€‚
* **æ±ºå®šç‚¹**

  * ç¾åœ¨æ™‚åˆ»ãŒå¹³å‡å°±å¯æ™‚åˆ»ã® 30ã€œ60 åˆ†å‰ã€‚
* **ä»‹å…¥ãƒ«ãƒ¼ãƒ«**

  * ã€Œç¡çœ è² å‚µãŒå¤§ããã€ä»Šã‚‚ã‚¹ãƒãƒ›åˆ©ç”¨ä¸­ã€ãªã‚‰ã€

    * ãƒˆãƒ¼ãƒ³: å„ªã—ã‚
    * Nudge: ã€Œãã‚ãã‚å¯ã‚‹æº–å‚™ã‚’å§‹ã‚ã‚ˆã†ã€
* **ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ—**

  * Nudge ã‹ã‚‰ 30ã€œ60 åˆ†å¾Œã«ã€Œå°±å¯æ¤œçŸ¥ã€ã§ããªã‹ã£ãŸå ´åˆã€

    * 1 å›ã¾ã§ãƒ•ã‚©ãƒ­ãƒ¼ã‚¢ãƒƒãƒ— Nudge ã‚’æ¤œè¨ã€‚

#### 5.2.2 Morning Phone

* **çŠ¶æ…‹æŠŠæ¡**

  * èµ·åºŠæ™‚åˆ»ï¼ˆHealthKit or DeviceActivity ã®æœ€åˆã®ä½¿ç”¨æ™‚é–“ï¼‰
  * èµ·åºŠå¾Œ 60 åˆ†ã®ã‚¹ãƒãƒ›ä½¿ç”¨æ™‚é–“ï¼ˆDeviceActivityï¼‰
* **æ±ºå®šç‚¹**

  * èµ·åºŠå¾Œ 30 åˆ†ãƒ»45 åˆ†çµŒéæ™‚ç‚¹ã€‚
* **ä»‹å…¥ãƒ«ãƒ¼ãƒ«**

  * èµ·åºŠå¾Œ 30 åˆ†ä»¥ä¸Šã€SNS/Video ã«å¼µã‚Šä»˜ãã£ã±ãªã—ãªã‚‰ã€

    * ã€Œã¾ãšã¯é¡”ã‚’æ´—ã† / æœã®æº–å‚™ã‚’ã€ã® Nudgeã€‚

#### 5.2.3 SNS / Video

* **çŠ¶æ…‹æŠŠæ¡**

  * `DeviceActivityMonitor` ã§ SNS ã‚«ãƒ†ã‚´ãƒªã®é€£ç¶šä½¿ç”¨æ™‚é–“ã‚’ç›£è¦–ã€‚([Apple Developer][4])
* **æ±ºå®šç‚¹**

  * 30 åˆ† / 60 åˆ† ç¶™ç¶šåˆ©ç”¨ã‚’æ¤œçŸ¥ã—ãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã€‚
* **ä»‹å…¥ãƒ«ãƒ¼ãƒ«**

  * 30 åˆ†æ™‚ç‚¹: è»½ã‚ã®ä¼‘æ†© Nudgeã€‚
  * 60 åˆ†æ™‚ç‚¹: ã‚‚ã†å°‘ã—å¼·ã‚ï¼ˆã€Œä¸€åº¦é–‰ã˜ã¦ã€ä½•ã‹åˆ¥ã®ã“ã¨ã‚’ã—ãªã„ï¼Ÿã€ï¼‰ã€‚

#### 5.2.4 Sedentary / Activity

* **çŠ¶æ…‹æŠŠæ¡**

  * CoreMotion ã§ 2 æ™‚é–“ä»¥ä¸Š é™æ­¢çŠ¶æ…‹ãŒç¶šã„ãŸã‹ã©ã†ã‹ã€‚
* **æ±ºå®šç‚¹**

  * 2 æ™‚é–“ç¶™ç¶šåº§ã‚Š ãŒæ¤œçŸ¥ã•ã‚ŒãŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã€‚
* **ä»‹å…¥ãƒ«ãƒ¼ãƒ«**

  * ã€Œå°‘ã—ç«‹ã¡ä¸ŠãŒã£ã¦ã‚¹ãƒˆãƒ¬ãƒƒãƒã—ã‚ˆã†ã€ã¨ã„ã†çŸ­ã„èª˜ã„ã€‚
  * ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ç†æƒ³ãŒã€ŒRunnerã€ã€ŒMuscularã€ãªã‚‰ã€ãã®æ–‡è„ˆã§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æ›¸ãã€‚

#### 5.2.5 Mindfulness / æ„Ÿæƒ…ç³»

* **æ±ºå®šç‚¹**

  * ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ Talk ã‚¿ãƒ–ã§ Feeling ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸç¬é–“ãŒ decision pointã€‚
* **ä»‹å…¥ãƒ«ãƒ¼ãƒ«**

  * ãã“ã‹ã‚‰ã¯ã€Œå¯¾è©±ãƒ™ãƒ¼ã‚¹ã€ã§ Nudgeï¼ˆéŸ³å£°ã‚»ãƒƒã‚·ãƒ§ãƒ³ï¼‰ã€‚
  * v0.3 ã§ã¯ self-report EMAï¼ˆæ„Ÿæƒ…è©•ä¾¡ãƒ•ã‚©ãƒ¼ãƒ ï¼‰ã¯ã¾ã å°å…¥ã—ãªã„ãŒã€
    å°†æ¥ã® JITAI-EMA ã®åœŸå°ã¨ã—ã¦ã€ŒTalk çµ‚äº†æ™‚ã®æ°—åˆ†ã€ã‚’èãã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ¤œè¨ã€‚([PMC][11])

### 5.3 è‡ªå¾‹æ”¹å–„ï¼ˆç°¡æ˜“ãƒãƒ³ãƒ‡ã‚£ãƒƒãƒˆ v0.3ï¼‰

**ç›®çš„**: ã„ããªã‚Šé«˜åº¦ãª contextual bandit ã§ã¯ãªãã€
ã€ŒåŒã˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç¹°ã‚Šè¿”ã—ã¦å¤±æ•—ã—ç¶šã‘ãªã„ã€ãƒ¬ãƒ™ãƒ«ã®æ”¹å–„ã‚’å…¥ã‚Œã‚‹ã€‚

#### 5.3.1 çŠ¶æ…‹ãƒ™ã‚¯ãƒˆãƒ«ï¼ˆä¾‹ï¼‰

```ts
interface NudgeContext {
  localTimeHour: number;     // 0-23
  dayOfWeek: number;         // 0-6
  snsMinutesToday: number;
  sleepDebtHours: number;    // æ¨å®š
  stepsToday: number;
  personality: {
    neuroticism: number;
    conscientiousness: number;
    // ...
  };
  struggleTags: string[];    // ["rumination", "sns_addiction"]
}
```

#### 5.3.2 è¡Œå‹• & å ±é…¬

* `action = (templateId, tone, channel)`
* `reward = 1`:

  * ä¾‹ï¼‰SNS Nudge â†’ 5 åˆ†ä»¥å†…ã« SNS ã‚¢ãƒ—ãƒªã‚’é–‰ã˜ã€10 åˆ†ä»¥å†…ã«å†é–‹ã—ãªã‹ã£ãŸã€‚
* `reward = 0`:

  * é€šçŸ¥ç„¡è¦–ã€ã¾ãŸã¯è¡Œå‹•å¤‰åŒ–ãªã—ã€‚

#### 5.3.3 ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ  v0.3

* å„ãƒ‰ãƒ¡ã‚¤ãƒ³ã”ã¨ã« 3ã€œ5 ç¨®é¡ã®ãƒ†ãƒ³ãƒ—ãƒ¬ï¼ˆå„ªã—ã„ / å³ã—ã‚ / äº‹å®Ÿãƒ™ãƒ¼ã‚¹ / æ¯”å–©çš„ ãªã©ï¼‰ã‚’å®šç¾©ã€‚
* ãƒ‰ãƒ¡ã‚¤ãƒ³ Ã— ãƒ†ãƒ³ãƒ—ãƒ¬ã”ã¨ã«ä»¥ä¸‹ã®ã‚«ã‚¦ãƒ³ã‚¿ã‚’æŒã¤:

  * `successCount`, `failureCount`
* ã€Œcontextual banditã€ã®ãƒ•ãƒ«å®Ÿè£…ã§ã¯ãªãã€

  * æŒ‡æ¨™:

    * **æˆåŠŸç‡** = `successCount / (successCount + failureCount)`
    * **ç–²åŠ´åº¦**: ç›´è¿‘ N å›ã§ã®å¤±æ•—é€£ç¶šå›æ•°
  * ãƒãƒªã‚·ãƒ¼:

    * æœ€è¿‘æˆåŠŸç‡ãŒé«˜ã„ãƒ†ãƒ³ãƒ—ãƒ¬ã‚’å„ªå…ˆã€‚
    * ç–²åŠ´åº¦ãŒé«˜ã„ã¨ãã¯ã€Œé€ã‚‰ãªã„ã€orã€Œãƒˆãƒ¼ãƒ³ã‚’å¤‰ãˆã‚‹ã€ã‚’é¸æŠã€‚
* ãƒ­ã‚¸ãƒƒã‚¯ã¯ `modules/nudge/policy.ts` ã® 1 ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¾ã¨ã‚ã‚‹ã€‚

> v0.4 ä»¥é™ã§ã€æœ¬æ ¼çš„ãª contextual banditï¼ˆLinear UCB ç­‰ï¼‰ã«ç§»è¡Œã™ã‚‹ã€‚([ambujtewari.com][10])

---

## 6. ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ & Behavior ç”Ÿæˆ

### 6.1 ä»Šæ—¥æ®‹ã‚Šã® 1 æ—¥ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

**å…¥åŠ›**

* Trait Profileï¼ˆç†æƒ³ / Struggleï¼‰
* éå» 7ã€œ14 æ—¥ã®è¡Œå‹•çµ±è¨ˆï¼ˆå¹³å‡èµ·åºŠ / å°±å¯ / SNS / æ­©æ•°ãªã©ï¼‰
* ä»Šæ—¥ã“ã“ã¾ã§ã®å®Ÿç¸¾ï¼ˆæœã€œç¾åœ¨ï¼‰

**æ‰‹é †**

1. ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§ã€Œå˜ç´”äºˆæ¸¬ã€:

   * éå»ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰ã€

     * æ®‹ã‚Šã® SNS æ™‚é–“
     * æ®‹ã‚Šã®ä»•äº‹ / å­¦ç¿’æ™‚é–“
     * å°±å¯æ™‚åˆ»
       ã‚’ rule ãƒ™ãƒ¼ã‚¹ã§æ¨å®šã€‚
2. OpenAI Chat ã«ä»¥ä¸‹ã‚’æ¸¡ã™:

   * ä¸Šè¨˜ã®çµ±è¨ˆ
   * ä»Šã®æ™‚åˆ»
   * ã€Œæ®‹ã‚Šã®æ™‚é–“ã‚’ 3ã€œ6 ãƒ–ãƒ­ãƒƒã‚¯ç¨‹åº¦ã«åŒºåˆ‡ã£ã¦ã€ã‚«ãƒ†ã‚´ãƒªã¨ä¸€è¨€ã‚³ãƒ¡ãƒ³ãƒˆã‚’ JSON ã§è¿”ã™ã€ã¨ã„ã†ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€‚
3. å‡ºåŠ› JSON ã‚’ Behavior ã‚¿ãƒ–ã«è¿”ã™ã€‚

### 6.2 1 / 5 / 10 å¹´å¾Œã®ã‚·ãƒŠãƒªã‚ª

**å…¥åŠ›**

* ç¾åœ¨ã®å¹³å‡è¡Œå‹•ï¼ˆç¡çœ  / é‹å‹• / SNSï¼‰
* ç†æƒ³ã®å§¿
* Nudge ã§æ”¹å–„ã™ã‚‹ä½™åœ°ï¼ˆ`improvement_potential` ã®ã‚ˆã†ãªå†…éƒ¨ã‚¹ã‚³ã‚¢ï¼‰

**å‡ºåŠ›**

* `current_traj_1y`, `current_traj_5y`, `current_traj_10y`

  * ã€Œä»Šã®è¡Œå‹•ãŒç¶šã„ãŸå ´åˆã€ã®1 æ—¥ã¨å¿ƒã®çŠ¶æ…‹ã®ãƒ†ã‚­ã‚¹ãƒˆï¼ˆå„ 3ã€œ5 è¡Œï¼‰ã€‚
* v0.3 ã§ã¯ã€Œæ”¹å–„ã—ãŸå ´åˆã€ã®ã‚·ãƒŠãƒªã‚ªã¯ Behavior UI ã«ã¯å‡ºã•ãªã„ï¼ˆå†…éƒ¨çš„ã«ã¯ä½¿ã£ã¦ã‚‚ã‚ˆã„ï¼‰ã€‚

---

## 7. Observability / Evalï¼ˆv0.4 ã‚¹ã‚³ãƒ¼ãƒ—ï¼‰

* v0.3 ã§ã¯:

  * ã‚¢ãƒ—ãƒª / API ãƒ­ã‚°ã‚’æœ€å°é™ã«å‡ºã—ã¦ã€æ‰‹å‹•ã§æŒ™å‹•ã‚’ç¢ºèªã™ã‚‹ã®ã¿ã€‚
* v0.4 ã§:

  * Langfuse ç­‰ã®ãƒˆãƒ¬ãƒ¼ã‚¹ãƒ„ãƒ¼ãƒ«å°å…¥ã€‚
  * Nudge æ–‡è¨€ã®å“è³ªè©•ä¾¡ã€è‡ªå‹•ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„ãƒ«ãƒ¼ãƒ—ãªã©ã€‚

---

## 8. ãƒ†ã‚¹ãƒˆãƒ»é–‹ç™ºæ”¯æ´ï¼ˆv0.4 ã‚¹ã‚³ãƒ¼ãƒ—ï¼‰

* v0.3 ã§ã¯:

  * æ‰‹å‹•ãƒ†ã‚¹ãƒˆ + Xcode ã® Unit/UI ãƒ†ã‚¹ãƒˆæœ€å°é™ã€‚
* v0.4 ã§:

  * Maestro ã«ã‚ˆã‚‹ iOS UI è‡ªå‹•ãƒ†ã‚¹ãƒˆã€‚
  * Mobile MCP ã«ã‚ˆã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‹ã‚‰ã®æ“ä½œãƒ†ã‚¹ãƒˆï¼ˆå°†æ¥ã®ç›®æ¨™ï¼‰ã€‚

---

## 9. v0.3 å®Ÿè£…ã®å„ªå…ˆåº¦ã¾ã¨ã‚

1. **å¿…é ˆ (Must)**

   * Talk ã‚¿ãƒ–ã®æ›´æ–°

     * Feeling ãƒœã‚¿ãƒ³
     * Realtime ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã®æ¥ç¶šä»•æ§˜
   * Onboarding ã®ç†æƒ³ / Struggle é¸æŠ
   * DeviceActivity / HealthKit / CoreMotion ã‹ã‚‰ã®æœ€å°é™ã®ãƒ­ã‚°å–å¾—
   * Nudge ãƒ«ãƒ¼ãƒ«ã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆSleep / SNS / Sedentary / Morning Phoneï¼‰
   * Nudge æˆåŠŸ / å¤±æ•—ã®ãƒ­ã‚®ãƒ³ã‚°
   * Behavior ã‚¿ãƒ–ã®

     * ä»Šæ—¥ã®ä¸€è¨€ã‚µãƒãƒª
     * ä»Šæ—¥æ®‹ã‚Šã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
     * 1 / 5 / 10 å¹´å¾Œã‚·ãƒŠãƒªã‚ª
   * mem0 ã®åŸºæœ¬çµ±åˆï¼ˆãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« + æœ€è¿‘ã®ãƒ¡ãƒ¢ãƒªæ¤œç´¢ï¼‰

2. **ã§ãã‚Œã° v0.3 ã§å…¥ã‚ŒãŸã„ (Should)**

   * BIG5 / ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼åˆ†æè¡¨ç¤º
   * ç°¡æ˜“ãª Nudge è‡ªå¾‹æ”¹å–„ï¼ˆæˆåŠŸç‡ / ç–²åŠ´åº¦ã«å¿œã˜ãŸãƒ†ãƒ³ãƒ—ãƒ¬åˆ‡æ›¿ï¼‰

3. **æ˜ç¢ºã« v0.4 ä»¥é™ (Later)**

   * Moss / Exa ã®å°å…¥
   * Langfuse / TruLens ã«ã‚ˆã‚‹å“è³ªè©•ä¾¡
   * Maestro / Mobile MCP ã§ã®è‡ªå‹•ãƒ†ã‚¹ãƒˆ

---

## 10. EMA ãƒ™ãƒ¼ã‚¹ã®ãƒ¡ãƒ³ã‚¿ãƒ« banditï¼ˆFeeling ãƒœã‚¿ãƒ³ç”¨ï¼‰

### 10.1 ç›®çš„ã¨è¨­è¨ˆ

* å¯¾è±¡: Talk ç”»é¢ã® Feeling ãƒœã‚¿ãƒ³ï¼ˆè‡ªå·±å«Œæ‚ª / ä¸å®‰ / æ€’ã‚Š ãªã©ï¼‰
* Goal: ã€ŒåŒã˜ feeling ã«å¯¾ã—ã¦ã€ã©ã®ã‚¿ã‚¤ãƒ—ã®å°ãï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ï¼‰ãŒãã®äººã«ä¸€ç•ªåŠ¹ãã‹ã€ã‚’ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã§å­¦ç¿’

v0.3 ã‹ã‚‰ LinTSï¼ˆThompson Sampling with linear modelï¼‰ã‚’æ¡ç”¨ã€‚

### 10.2 Decision Point

ãƒ¡ãƒ³ã‚¿ãƒ« bandit ã® DP:

1. **Feeling ãƒœã‚¿ãƒ³æŠ¼ä¸‹ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼èµ·å‹• JITAI/EMIï¼‰**
   * `eventType = "feeling_button_pressed"`
   * `feeling_id = "self_loathing" | "anxiety" | "anger" | ...`

### 10.3 Stateï¼ˆç‰¹å¾´é‡ï¼‰

```ts
interface MentalState {
  localHour: number;           // 0-23
  dayOfWeek: number;           // 0-6
  feelingId: string;           // "self_loathing" | "anxiety" | etc.
  recentFeelingCount: number;  // ä»Šæ—¥ãã® feeling ãƒœã‚¿ãƒ³ãŒæŠ¼ã•ã‚ŒãŸå›æ•°
  recentTalkMinutes: number;   // ä»Šæ—¥è©±ã—ãŸåˆè¨ˆæ™‚é–“
  sleepDebtHours: number;      // éå»7æ—¥ã®å¹³å‡ã¨æ˜¨å¤œã®å·®
  snsMinutesToday: number;
  ruminationProxy: number;     // 0-1ï¼ˆæ·±å¤œSNS + åèŠ»ç™ºè¨€ã‹ã‚‰è¨ˆç®—ï¼‰
  big5: { O: number; C: number; E: number; A: number; N: number };
  struggles: string[];
}
```

### 10.4 Actionï¼ˆãƒ†ãƒ³ãƒ—ãƒ¬ç¾¤ï¼‰

Feeling ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ãƒ†ãƒ³ãƒ—ãƒ¬ä¾‹:

| ID | ãƒ†ãƒ³ãƒ—ãƒ¬å | BCT ã‚¿ã‚° |
|----|----------|---------|
| A | self_compassion_soft | self_compassion |
| B | cognitive_reframe | reappraisal |
| C | behavioral_activation_micro | behavioral_activation |
| D | metta_like | loving_kindness |
| E | fact_check | cognitive_defusion |

### 10.5 Rewardï¼ˆEMA ãƒ™ãƒ¼ã‚¹ï¼‰

ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ã« Anicca ãŒçŸ­ãèã:
> ã€Œã•ã£ãã‚ˆã‚Šå°‘ã—æ¥½ã«ãªã£ãŸï¼Ÿã€ï¼ˆã¯ã„ / ã„ã„ãˆï¼‰

* `emaBetter = true` â†’ reward = 1
* `emaBetter = false` â†’ reward = 0

### 10.6 API ãƒ•ãƒ­ãƒ¼

1. iOS ã‹ã‚‰ Feeling ãƒœã‚¿ãƒ³æŠ¼ä¸‹ â†’ `POST /api/mobile/feeling/start`
2. ã‚µãƒ¼ãƒ: state æ§‹ç¯‰ â†’ bandit ã§ãƒ†ãƒ³ãƒ—ãƒ¬é¸æŠ â†’ mem0 æ¤œç´¢ â†’ ã‚¹ã‚¯ãƒªãƒ—ãƒˆç”Ÿæˆ
3. ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº† â†’ `POST /api/mobile/feeling/end` ã§ EMA å›ç­”ã‚’é€ä¿¡
4. ã‚µãƒ¼ãƒ: reward ã‚’ bandit ã«æ›´æ–°ã€mem0 ã«ä¿å­˜

---

## 11. BIG5 / ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼åˆ†æï¼ˆã‚¢ãƒ³ã‚±ãƒ¼ãƒˆç„¡ã—ï¼‰

### 11.1 æ–‡çŒ®ãƒ™ãƒ¼ã‚¹ã®å¦¥å½“æ€§

* Peltonen et al. (2020): ã‚¢ãƒ—ãƒªã‚«ãƒ†ã‚´ãƒªä½¿ç”¨æ™‚é–“ã‹ã‚‰ Big Five ã‚’é«˜ç²¾åº¦ã§äºˆæ¸¬å¯èƒ½
* Stachl et al. (2020): 6ã‚¯ãƒ©ã‚¹ã®ã‚¹ãƒãƒ›è¡Œå‹•ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ Big Five ã‚’äºˆæ¸¬ï¼ˆRâ‰ˆ0.37ã€œ0.4ï¼‰

### 11.2 ç‰¹å¾´é‡è¨­è¨ˆ

30 æ—¥åˆ†ã®ãƒ­ã‚°ã‹ã‚‰ä»¥ä¸‹ã‚’æŠ½å‡º:

* ScreenTime ç³»: SNS / Entertainment / Productivity minutes per dayã€Night usage (22:00-03:00)
* è¡Œå‹•ãƒªã‚ºãƒ : average sleep timeã€average wake timeã€weekend vs weekday differences
* ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£: å¹³å‡æ­©æ•°ã€é‹å‹•æ—¥æ•°/é€±
* Talk/Text ç³»: è‡ªå·±è¨€åŠé »åº¦ã€sentiment ratioã€æŠ½è±¡èª vs å…·ä½“èªæ¯”ç‡

### 11.3 æ¨å®šãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

1. 30æ—¥åˆ†ã®é›†ç´„ãƒ­ã‚°ã‚’ bullet list ã«ã™ã‚‹
2. OpenAI Chat ã«æ¸¡ã—ã¦ Big Five (O, C, E, A, N) ã‚’ 0.0ã€œ1.0 ã§æ¨å®š
3. çµæœã‚’ `user_traits.big5` ã¨ mem0 profile ã«ä¿å­˜
4. Traits Detail ç”»é¢ã§ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆã¨æ–‡ç« ã§è¡¨ç¤º
5. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä¿®æ­£ã—ãŸå ´åˆã¯ override ã¨ã—ã¦æ¬¡å›ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«å«ã‚ã‚‹

### 11.4 Nudge ã¨ã®æ¥ç¶š

* Neuroticism é«˜ â†’ å¼·ã„è„…ã—ãƒ†ãƒ³ãƒ—ãƒ¬ã‚’é¿ã‘ã‚‹
* Conscientiousness ä½ â†’ micro-step / self-compassion ç³»å„ªå…ˆ
* Openness é«˜ â†’ ç†è«–èª¬æ˜ã‚’å«ã‚€ãƒ†ãƒ³ãƒ—ãƒ¬ãŒåŠ¹ãã‚„ã™ã„

---

## 12. ç’°å¢ƒå¤‰æ•°ã®å®Œå…¨ãƒªã‚¹ãƒˆï¼ˆRailway ã«è¨­å®šï¼‰

### 12.1 æ—¢å­˜ï¼ˆå¤‰æ›´ãªã—ï¼‰

| å¤‰æ•°å | ç”¨é€” |
|--------|------|
| `DATABASE_URL` | PostgreSQL æ¥ç¶šæ–‡å­—åˆ— |
| `OPENAI_API_KEY` | OpenAI APIï¼ˆRealtime å«ã‚€ï¼‰ |
| `REVENUECAT_PROJECT_ID` | RevenueCat |
| `REVENUECAT_REST_API_KEY` | RevenueCat |
| `REVENUECAT_WEBHOOK_SECRET` | RevenueCat Webhook æ¤œè¨¼ |
| `REVENUECAT_ENTITLEMENT_ID` | RevenueCat ã‚¨ãƒ³ã‚¿ã‚¤ãƒˆãƒ«ãƒ¡ãƒ³ãƒˆ |
| `REVENUECAT_VC_CODE` | RevenueCat Virtual Currency |
| `FREE_MONTHLY_LIMIT` | ç„¡æ–™ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœˆé–“ä¸Šé™ï¼ˆåˆ†ï¼‰ |
| `PRO_MONTHLY_LIMIT` | PRO ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æœˆé–“ä¸Šé™ï¼ˆåˆ†ï¼‰ |
| `PROXY_GUEST_JWT_SECRET` | JWT ç½²åç”¨ |

### 12.2 æ–°è¦è¿½åŠ ï¼ˆv0.3ï¼‰

| å¤‰æ•°å | ç”¨é€” | å–å¾—å…ƒ |
|--------|------|--------|
| `MEM0_API_KEY` | mem0 ã‚¯ãƒ©ã‚¦ãƒ‰ API ã‚­ãƒ¼ | [mem0.ai](https://app.mem0.ai) ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ |

- MEM0_API_KEY ã‚’è¿½åŠ ï¼ˆRailway ã«è¨­å®šï¼‰ã€‚Moss/Exa ã¯ v0.4 ä»¥é™ã§éä½¿ç”¨ã¨æ˜è¨˜ã™ã‚‹ã€‚

### 12.3 å‰Šé™¤ï¼ˆv0.3 ã§ã¯ä¸è¦ï¼‰

- ~~`MOSS_PROJECT_ID`~~ â†’ v0.4 ä»¥é™
- ~~`MOSS_PROJECT_KEY`~~ â†’ v0.4 ä»¥é™
- ~~`EXA_API_KEY`~~ â†’ v0.4 ä»¥é™

---

## 13. 3ãƒ¢ãƒ€ãƒªãƒ†ã‚£ã®ä½ç½®ã¥ã‘

1. **è‡ªå‹• JITAI é€šçŸ¥**: Sleep / SNS / Movement / Priority Habitï¼ˆè¡Œå‹•ãƒ­ã‚°ãƒ™ãƒ¼ã‚¹ rewardï¼‰
2. **é€šçŸ¥ã‚¿ãƒƒãƒ— â†’ Session ç”»é¢**: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä»˜ãéŸ³å£°å°ã
3. **Talk Feeling EMI**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã® Feeling ãƒœã‚¿ãƒ³æŠ¼ä¸‹ãŒ DPã€EMA ãƒ™ãƒ¼ã‚¹ã® reward

v0.3 ã«ãŠã„ã¦ 3 ãƒ¢ãƒ€ãƒªãƒ†ã‚£ã¯ã™ã¹ã¦å«ã‚ã‚‹ï¼ˆMUSTï¼‰ã€‚

---

## 14. ãã®ä»–ã‚¯ãƒªã‚¢ã«ã™ã¹ãç‚¹

### 14.1 bandit å®Ÿè£…å ´æ‰€

* v0.3 ã¯ Node/TS å†…ã§ LinTS ã‚’è‡ªå‰å®Ÿè£…
* ã‚ªãƒ•ãƒ©ã‚¤ãƒ³è§£æç”¨ã« Python ç‰ˆã¯åˆ¥ãƒ¬ãƒ or ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã‚µãƒ¼ãƒ“ã‚¹ã¨ã—ã¦æŒã¤

### 14.2 ãƒ­ã‚°ã®å–ã‚Šæ–¹

* ã™ã¹ã¦ã® Nudge / Feeling ã‚»ãƒƒã‚·ãƒ§ãƒ³ã«å¯¾ã—ã¦ `(state, action, reward, bct_tags)` ã‚’æ®‹ã™
* ã“ã‚Œã¯å¾Œã®ã€Œäººé¡ä¸€èˆ¬ã®ãƒ‘ã‚¿ãƒ¼ãƒ³åˆ†æã€ã®ãŸã‚ã®å¿…é ˆãƒ‡ãƒ¼ã‚¿

### 14.3 ãƒ—ãƒ©ã‚¤ãƒã‚· / ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

* mem0 ã«å…¥ã‚Œã‚‹ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰ã¯åå‰/ä½æ‰€ãªã©å€‹äººç‰¹å®šæƒ…å ±ã‚’ LLM ã§ redact ã—ã¦ä¿å­˜

### 14.4 ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã¨æ—¥ä»˜è¨ˆç®—

* å…¨ã¦ã® `daily_metrics` ã¨ Behavior è¡¨ç¤ºã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ãƒ™ãƒ¼ã‚¹ã§æ—¥ä»˜ã‚’åˆ‡ã‚‹
* Nudge DP åˆ¤å®šã‚‚åŒæ§˜

### 14.5 å¤±æ•—æ™‚ã® fallback UX

* ã‚»ãƒ³ã‚µãƒ¼ãŒè¨±å¯ã•ã‚Œã¦ã„ãªã„æ™‚ã¯ã€Œä»Šã¯è©³ã—ã„è¡Œå‹•ãƒ‡ãƒ¼ã‚¿ã¯è¦‹ãˆã¦ã„ã¾ã›ã‚“ã€ã¨æ˜ç¤º
* ãã‚Œã§ã‚‚ Feeling ãƒœã‚¿ãƒ³ã¨ Talk ã ã‘ã§ã€Œãƒ¡ãƒ³ã‚¿ãƒ«å´ã®å°ãã€ã¯æä¾›å¯èƒ½

---

ã“ã®è¦ä»¶å®šç¾©æ›¸ã‚’ãƒ™ãƒ¼ã‚¹ã«ã€

* `apps/api` å´ã§ã¯

  * `modules/` ä»¥ä¸‹ã« **memory / nudge / simulation / metrics** ã®å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’åˆ‡ã‚‹ã€‚
* `aniccaios` å´ã§ã¯

  * Talk / Behavior / Onboarding / Sensors / Notifications ã®å„ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’ã¯ã£ãã‚Šåˆ†ã‘ã‚‹ã€‚

â€¦â€¦ã¨ã„ã†å½¢ã§é€²ã‚ã‚Œã°ã€ãã®ã¾ã¾ Cursor ã«è²¼ã£ã¦ã‚‚è¿·ã‚ãšå®Ÿè£…ã«å…¥ã‚Œã‚‹ã¯ãšã€‚

æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¨ã—ã¦ã¯ã€

* `apps/api` ã®å…·ä½“çš„ãªã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä»•æ§˜ï¼ˆå‹å®šç¾©ï¼‰
* `aniccaios` ã® ViewModel / State æ§‹é€ 

ã‚’ç´°ã‹ãè½ã¨ã—ã¦ã„ã‘ã° OKã€‚

[1]: https://github.com/Daisuke134/anicca.ai "GitHub - Daisuke134/anicca.ai: Voice leading you to nirvana."
[2]: https://www.frontiersin.org/journals/digital-health/articles/10.3389/fdgth.2025.1460167/full?utm_source=chatgpt.com "Beyond the current state of just-in-time adaptive ..."
[3]: https://docs.mem0.ai/cookbooks/overview?utm_source=chatgpt.com "Overview"
[4]: https://developer.apple.com/documentation/screentimeapidocumentation?utm_source=chatgpt.com "Screen Time Technology Frameworks"
[5]: https://docs.mem0.ai/open-source/node-quickstart?utm_source=chatgpt.com "Node SDK Quickstart"
[6]: https://www.usemoss.dev/?utm_source=chatgpt.com "Moss"
[7]: https://docs.exa.ai/reference/search?utm_source=chatgpt.com "Search"
[8]: https://medium.com/%40expertappdevs/exploring-screen-time-api-in-swift-146eeda5ad02?utm_source=chatgpt.com "Exploring Screen Time API in Swift | by Expert App Devs"
[9]: https://arxiv.org/abs/2504.19413?utm_source=chatgpt.com "Mem0: Building Production-Ready AI Agents with Scalable Long-Term Memory"
[10]: https://www.ambujtewari.com/research/tewari17ads.pdf?utm_source=chatgpt.com "From Ads to Interventions: Contextual Bandits in Mobile ..."
[11]: https://pmc.ncbi.nlm.nih.gov/articles/PMC10450096/?utm_source=chatgpt.com "Just-in-time adaptive ecological momentary assessment ..."
