appId: com.anicca.app
productName: Anicca
directories:
  output: release
files:
  - dist/main-voice-simple.js
  - dist/config.js
  - dist/services/**/*
  - dist/agents/**/*
  - dist/recorder.html
  - node_modules/**/*
  # Desktop app assets (tray + app icon)
  - assets/desktop/tray-icon.png
  - assets/desktop/tray-icon@2x.png
  - assets/desktop/icon.icns
  # Exclude entire web and proxy projects from bundle
  - "!anicca-web/**"
  - "!anicca-proxy-slack/**"
  # General excludes for slimming node_modules
  - "!**/.git"
  - "!**/.env"
  - "!**/node_modules/*/{CHANGELOG.md,README.md,README,readme.md,readme}"
  - "!**/node_modules/*/{test,__tests__,tests,powered-test,example,examples}"
  - "!dist/ui/**"
  - "!**/node_modules/@anthropic-ai/claude-code/vendor/claude-code-jetbrains-plugin/**"
asarUnpack:
  - "**/node_modules/@anthropic-ai/claude-code/**/*"
  - "**/node_modules/@modelcontextprotocol/server-filesystem/**/*"
mac:
  category: public.app-category.productivity
  icon: assets/desktop/icon.icns
  hardenedRuntime: true
  gatekeeperAssess: false
  entitlements: build/entitlements.mac.plist
  entitlementsInherit: build/entitlements.mac.plist
  extendInfo:
    LSUIElement: true
    NSMicrophoneUsageDescription: "Aniccaは音声コマンドを認識するためにマイクを使用します。「Hey Anicca」と話しかけて操作できます。"
  target:
    - target: dmg
      arch:
        - arm64
    - target: zip
      arch:
        - arm64
afterSign: notarize.js
dmg:
  artifactName: anicca-${arch}.dmg
  contents:
    - x: 130
      y: 220
    - x: 410
      y: 220
      type: link
      path: /Applications
publish:
  - provider: github
    owner: Daisuke134
    repo: anicca.ai
    private: false
    releaseType: release
generateUpdatesFilesForAllChannels: true
